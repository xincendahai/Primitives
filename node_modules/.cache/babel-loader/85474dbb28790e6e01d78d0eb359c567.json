{"ast":null,"code":"import _classCallCheck from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/src/components/sketch-ruler/line.js\";\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\n\nvar Line = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Line, _PureComponent);\n\n  var _super = _createSuper(Line);\n\n  function Line(props) {\n    var _this;\n\n    _classCallCheck(this, Line);\n\n    _this = _super.call(this, props);\n\n    _this.handleDown = function (e) {\n      var _this$props = _this.props,\n          vertical = _this$props.vertical,\n          index = _this$props.index,\n          scale = _this$props.scale,\n          onMouseDown = _this$props.onMouseDown,\n          onRelease = _this$props.onRelease;\n      var startValue = _this.state.value;\n      var startD = vertical ? e.clientY : e.clientX;\n      onMouseDown();\n\n      var onMove = function onMove(e) {\n        var currentD = vertical ? e.clientY : e.clientX;\n        var newValue = Math.round(startValue + (currentD - startD) / scale);\n\n        _this.setState({\n          value: newValue\n        });\n      };\n\n      var onEnd = function onEnd() {\n        onRelease(_this.state.value, index);\n        document.removeEventListener(\"mousemove\", onMove);\n        document.removeEventListener(\"mouseup\", onEnd);\n      };\n\n      document.addEventListener(\"mousemove\", onMove);\n      document.addEventListener(\"mouseup\", onEnd);\n    };\n\n    _this.handleRemove = function () {\n      var _this$props2 = _this.props,\n          index = _this$props2.index,\n          onRemove = _this$props2.onRemove;\n      onRemove(index);\n    };\n\n    _this.state = {\n      value: props.value\n    };\n    return _this;\n  }\n\n  _createClass(Line, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          vertical = _this$props3.vertical,\n          start = _this$props3.start,\n          scale = _this$props3.scale;\n      var value = this.state.value;\n      var offset = (value - start) * scale;\n      if (offset < 0) return null;\n      var lineStyle = vertical ? {\n        top: offset\n      } : {\n        left: offset\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"line\",\n        style: lineStyle,\n        onMouseDown: this.handleDown,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"del\",\n        onClick: this.handleRemove,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }\n      }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"value\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }\n      }, value)));\n    }\n  }]);\n\n  return Line;\n}(PureComponent);\n\nexport { Line as default };\nLine.propTypes = {\n  index: PropTypes.number,\n  start: PropTypes.number,\n  vertical: PropTypes.bool,\n  scale: PropTypes.number,\n  value: PropTypes.number,\n  onRemove: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onRelease: PropTypes.func\n};","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/图元/react-visual-data/src/components/sketch-ruler/line.js"],"names":["React","PureComponent","PropTypes","Line","props","handleDown","e","vertical","index","scale","onMouseDown","onRelease","startValue","state","value","startD","clientY","clientX","onMove","currentD","newValue","Math","round","setState","onEnd","document","removeEventListener","addEventListener","handleRemove","onRemove","start","offset","lineStyle","top","left","propTypes","number","bool","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class Line extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value\n    };\n  }\n  handleDown = (e) => {\n    const { vertical, index, scale, onMouseDown, onRelease } = this.props;\n    const { value: startValue } = this.state;\n    const startD = vertical ? e.clientY : e.clientX;\n    onMouseDown();\n    const onMove = (e) => {\n      const currentD = vertical ? e.clientY : e.clientX;\n      const newValue = Math.round(startValue + (currentD - startD) / scale);\n      this.setState({ value: newValue });\n    };\n    const onEnd = () => {\n      onRelease(this.state.value, index);\n      document.removeEventListener(\"mousemove\", onMove);\n      document.removeEventListener(\"mouseup\", onEnd);\n    };\n    document.addEventListener(\"mousemove\", onMove);\n    document.addEventListener(\"mouseup\", onEnd);\n  };\n  handleRemove = () => {\n    const { index, onRemove } = this.props;\n    onRemove(index);\n  };\n\n  render() {\n    const { vertical, start, scale } = this.props;\n    const { value } = this.state;\n    const offset = (value - start) * scale;\n    if (offset < 0) return null;\n    const lineStyle = vertical ? { top: offset } : { left: offset };\n\n    return (\n      <div className=\"line\" style={lineStyle} onMouseDown={this.handleDown}>\n        <div className=\"action\">\n          <span className=\"del\" onClick={this.handleRemove}>\n            &times;\n          </span>\n          <span className=\"value\">{value}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nLine.propTypes = {\n  index: PropTypes.number,\n  start: PropTypes.number,\n  vertical: PropTypes.bool,\n  scale: PropTypes.number,\n  value: PropTypes.number,\n  onRemove: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onRelease: PropTypes.func\n};\n"]},"metadata":{},"sourceType":"module"}