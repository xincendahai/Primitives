{"ast":null,"code":"import _toConsumableArray from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/components/sketch-ruler/index.js\";\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport RulerWrapper from \"./ruler-wrapper\";\nimport RulerContextMenu from \"./ruler-context-menu\";\nimport IconFont from \"../iconfont\";\nimport { StyledRuler } from \"./styles\";\nvar DEFAULTMENU = {\n  bgColor: \"#27343e\",\n  dividerColor: \"#3a4659\",\n  listItem: {\n    textColor: \"#bcc9d4\",\n    hoverTextColor: \"#bcc9d4\",\n    disabledTextColor: \"#90a0ae\",\n    bgColor: \"#27343e\",\n    hoverBgColor: \"#1b1f25\"\n  }\n};\n\nvar SketchRuler = /*#__PURE__*/function (_PureComponent) {\n  _inherits(SketchRuler, _PureComponent);\n\n  var _super = _createSuper(SketchRuler);\n\n  function SketchRuler(props) {\n    var _this;\n\n    _classCallCheck(this, SketchRuler);\n\n    _this = _super.call(this, props);\n\n    _this.onCornerClick = function () {\n      var handleShowReferLine = _this.props.handleShowReferLine;\n      handleShowReferLine();\n    };\n\n    _this.handleLineChange = function (arr, vertical) {\n      var _this$props = _this.props,\n          horLineArr = _this$props.horLineArr,\n          verLineArr = _this$props.verLineArr,\n          handleLine = _this$props.handleLine;\n      var newLines = vertical ? {\n        h: horLineArr,\n        v: _toConsumableArray(arr)\n      } : {\n        h: _toConsumableArray(arr),\n        v: verLineArr\n      };\n      handleLine(newLines);\n    };\n\n    _this.onShowRightMenu = function (left, top, vertical) {\n      _this.setState({\n        isShowMenu: true,\n        vertical: vertical,\n        positionObj: {\n          x: left,\n          y: top\n        }\n      });\n    };\n\n    _this.onhandlecloseMenu = function () {\n      _this.setState({\n        isShowMenu: false\n      });\n    };\n\n    var ratio = props.ratio,\n        palette = props.palette;\n    var menu = palette.menu || DEFAULTMENU;\n    _this.canvasConfigs = {\n      ratio: ratio,\n      bgColor: palette.bgColor,\n      longfgColor: palette.longfgColor,\n      shortfgColor: palette.shortfgColor,\n      fontColor: palette.fontColor,\n      shadowColor: palette.shadowColor,\n      lineColor: palette.lineColor\n    };\n    _this.menuConfigs = {\n      bgColor: menu.bgColor,\n      dividerColor: menu.dividerColor,\n      listItem: menu.listItem\n    };\n    _this.state = {\n      isShowMenu: false,\n      vertical: false,\n      positionObj: {\n        x: 0,\n        y: 0\n      }\n    };\n    return _this;\n  }\n\n  _createClass(SketchRuler, [{\n    key: \"preventDefault\",\n    // 取消默认菜单事件\n    value: function preventDefault(e) {\n      e.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          width = _this$props2.width,\n          height = _this$props2.height,\n          scale = _this$props2.scale,\n          handleLine = _this$props2.handleLine,\n          thick = _this$props2.thick,\n          shadow = _this$props2.shadow,\n          startX = _this$props2.startX,\n          startY = _this$props2.startY,\n          horLineArr = _this$props2.horLineArr,\n          verLineArr = _this$props2.verLineArr,\n          bgColor = _this$props2.palette.bgColor,\n          isOpenMenuFeature = _this$props2.isOpenMenuFeature,\n          handleShowRuler = _this$props2.handleShowRuler,\n          isShowReferLine = _this$props2.isShowReferLine,\n          handleShowReferLine = _this$props2.handleShowReferLine;\n      var _this$state = this.state,\n          positionObj = _this$state.positionObj,\n          vertical = _this$state.vertical,\n          isShowMenu = _this$state.isShowMenu;\n      var x = shadow.x,\n          y = shadow.y,\n          w = shadow.width,\n          h = shadow.height;\n      var commonProps = {\n        scale: scale,\n        canvasConfigs: this.canvasConfigs,\n        onLineChange: this.handleLineChange,\n        onShowRightMenu: this.onShowRightMenu,\n        isShowReferLine: isShowReferLine,\n        handleShowReferLine: handleShowReferLine\n      };\n      var menuPosition = {\n        left: positionObj.x,\n        top: positionObj.y\n      };\n      return /*#__PURE__*/React.createElement(StyledRuler, Object.assign({\n        isShowReferLine: isShowReferLine,\n        thick: thick\n      }, this.canvasConfigs, {\n        onContextMenu: this.preventDefault,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(RulerWrapper, Object.assign({\n        width: width,\n        height: thick,\n        start: startX,\n        lines: horLineArr,\n        selectStart: x,\n        selectLength: w\n      }, commonProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(RulerWrapper, Object.assign({\n        width: thick,\n        height: height,\n        start: startY,\n        lines: verLineArr,\n        selectStart: y,\n        selectLength: h,\n        vertical: true\n      }, commonProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"corner\",\n        style: {\n          backgroundColor: bgColor\n        },\n        onClick: this.onCornerClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(IconFont, {\n        antd: true,\n        type: isShowReferLine ? \"EyeOutlined\" : \"EyeInvisibleOutlined\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }\n      })), isOpenMenuFeature && isShowMenu && /*#__PURE__*/React.createElement(RulerContextMenu, {\n        key: String(menuPosition.left) + String(menuPosition.top),\n        vertical: vertical,\n        handleLine: handleLine,\n        horLineArr: horLineArr,\n        verLineArr: verLineArr,\n        menuPosition: menuPosition,\n        handleShowRuler: handleShowRuler,\n        isShowReferLine: isShowReferLine,\n        handleShowReferLine: handleShowReferLine,\n        oncloseMenu: this.onhandlecloseMenu,\n        menuConfigs: this.menuConfigs,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }));\n    }\n  }]);\n\n  return SketchRuler;\n}(PureComponent);\n\nexport { SketchRuler as default };\nSketchRuler.propTypes = {\n  scale: PropTypes.number,\n  ratio: PropTypes.number,\n  thick: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  shadow: PropTypes.object,\n  horLineArr: PropTypes.array,\n  verLineArr: PropTypes.array,\n  handleLine: PropTypes.func,\n  isOpenMenuFeature: PropTypes.bool,\n  handleShowRuler: PropTypes.func,\n  isShowReferLine: PropTypes.bool,\n  handleShowReferLine: PropTypes.func,\n  palette: PropTypes.shape({\n    bgColor: PropTypes.string,\n    longfgColor: PropTypes.string,\n    shortfgColor: PropTypes.string,\n    fontColor: PropTypes.string,\n    shadowColor: PropTypes.string,\n    lineColor: PropTypes.string,\n    borderColor: PropTypes.string,\n    menu: PropTypes.shape({\n      bgColor: PropTypes.string,\n      // menu菜单\n      dividerColor: PropTypes.string,\n      // 分割线\n      listItem: PropTypes.shape({\n        textColor: PropTypes.string,\n        // 文本\n        hoverTextColor: PropTypes.string,\n        disabledTextColor: PropTypes.string,\n        bgColor: PropTypes.string,\n        hoverBgColor: PropTypes.string\n      })\n    })\n  })\n};\nSketchRuler.defaultProps = {\n  isOpenMenuFeature: false,\n  isShowReferLine: true,\n  handleShowRuler: function handleShowRuler() {},\n  handleShowReferLine: function handleShowReferLine() {},\n  thick: 20,\n  horLineValue: [],\n  verLineValue: [],\n  scale: 1,\n  startX: 0,\n  startY: 0,\n  ratio: window.devicePixelRatio || 1,\n  shadow: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  palette: {\n    bgColor: \"#0e1013\",\n    // ruler bg color\n    longfgColor: \"#3a4659\",\n    // ruler longer mark color\n    shortfgColor: \"#3a4659\",\n    // ruler shorter mark color\n    fontColor: \"#90a0ae\",\n    // ruler font color\n    shadowColor: \"#E8E8E8\",\n    // ruler shadow color\n    lineColor: \"rgba(0, 173, 255, 0.84)\",\n    borderColor: \"#E8E8E8\",\n    menu: DEFAULTMENU\n  }\n};","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/components/sketch-ruler/index.js"],"names":["React","PureComponent","PropTypes","RulerWrapper","RulerContextMenu","IconFont","StyledRuler","DEFAULTMENU","bgColor","dividerColor","listItem","textColor","hoverTextColor","disabledTextColor","hoverBgColor","SketchRuler","props","onCornerClick","handleShowReferLine","handleLineChange","arr","vertical","horLineArr","verLineArr","handleLine","newLines","h","v","onShowRightMenu","left","top","setState","isShowMenu","positionObj","x","y","onhandlecloseMenu","ratio","palette","menu","canvasConfigs","longfgColor","shortfgColor","fontColor","shadowColor","lineColor","menuConfigs","state","e","preventDefault","width","height","scale","thick","shadow","startX","startY","isOpenMenuFeature","handleShowRuler","isShowReferLine","w","commonProps","onLineChange","menuPosition","backgroundColor","String","propTypes","number","object","array","func","bool","shape","string","borderColor","defaultProps","horLineValue","verLineValue","window","devicePixelRatio"],"mappings":"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","sourcesContent":["import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport RulerWrapper from \"./ruler-wrapper\";\nimport RulerContextMenu from \"./ruler-context-menu\";\nimport IconFont from \"../iconfont\";\n\nimport { StyledRuler } from \"./styles\";\n\nconst DEFAULTMENU = {\n  bgColor: \"#27343e\",\n  dividerColor: \"#3a4659\",\n  listItem: {\n    textColor: \"#bcc9d4\",\n    hoverTextColor: \"#bcc9d4\",\n    disabledTextColor: \"#90a0ae\",\n    bgColor: \"#27343e\",\n    hoverBgColor: \"#1b1f25\"\n  }\n};\n\nexport default class SketchRuler extends PureComponent {\n  constructor(props) {\n    super(props);\n    const { ratio, palette } = props;\n    const menu = palette.menu || DEFAULTMENU;\n    this.canvasConfigs = {\n      ratio,\n      bgColor: palette.bgColor,\n      longfgColor: palette.longfgColor,\n      shortfgColor: palette.shortfgColor,\n      fontColor: palette.fontColor,\n      shadowColor: palette.shadowColor,\n      lineColor: palette.lineColor\n    };\n    this.menuConfigs = {\n      bgColor: menu.bgColor,\n      dividerColor: menu.dividerColor,\n      listItem: menu.listItem\n    };\n    this.state = {\n      isShowMenu: false,\n      vertical: false,\n      positionObj: {\n        x: 0,\n        y: 0\n      }\n    };\n  }\n  onCornerClick = () => {\n    const { handleShowReferLine } = this.props;\n    handleShowReferLine();\n  };\n  handleLineChange = (arr, vertical) => {\n    const { horLineArr, verLineArr, handleLine } = this.props;\n    const newLines = vertical ? { h: horLineArr, v: [...arr] } : { h: [...arr], v: verLineArr };\n    handleLine(newLines);\n  };\n  // 展示右键菜单\n  onShowRightMenu = (left, top, vertical) => {\n    this.setState({\n      isShowMenu: true,\n      vertical: vertical,\n      positionObj: {\n        x: left,\n        y: top\n      }\n    });\n  };\n  onhandlecloseMenu = () => {\n    this.setState({ isShowMenu: false });\n  };\n  // 取消默认菜单事件\n  preventDefault(e) {\n    e.preventDefault();\n  }\n  render() {\n    const {\n      width,\n      height,\n      scale,\n      handleLine,\n      thick,\n      shadow,\n      startX,\n      startY,\n      horLineArr,\n      verLineArr,\n      palette: { bgColor },\n      isOpenMenuFeature,\n      handleShowRuler,\n      isShowReferLine,\n      handleShowReferLine\n    } = this.props;\n\n    const { positionObj, vertical, isShowMenu } = this.state;\n\n    const { x, y, width: w, height: h } = shadow;\n\n    const commonProps = {\n      scale,\n      canvasConfigs: this.canvasConfigs,\n      onLineChange: this.handleLineChange,\n      onShowRightMenu: this.onShowRightMenu,\n      isShowReferLine,\n      handleShowReferLine\n    };\n\n    const menuPosition = {\n      left: positionObj.x,\n      top: positionObj.y\n    };\n\n    return (\n      <StyledRuler\n        isShowReferLine={isShowReferLine}\n        thick={thick}\n        {...this.canvasConfigs}\n        onContextMenu={this.preventDefault}\n      >\n        {/* 水平方向 */}\n        <RulerWrapper\n          width={width}\n          height={thick}\n          start={startX}\n          lines={horLineArr}\n          selectStart={x}\n          selectLength={w}\n          {...commonProps}\n        />\n        {/* 竖直方向 */}\n        <RulerWrapper\n          width={thick}\n          height={height}\n          start={startY}\n          lines={verLineArr}\n          selectStart={y}\n          selectLength={h}\n          vertical\n          {...commonProps}\n        />\n        <span className=\"corner\" style={{ backgroundColor: bgColor }} onClick={this.onCornerClick}>\n          <IconFont antd={true} type={isShowReferLine ? \"EyeOutlined\" : \"EyeInvisibleOutlined\"} />\n        </span>\n        {isOpenMenuFeature && isShowMenu && (\n          <RulerContextMenu\n            key={String(menuPosition.left) + String(menuPosition.top)}\n            vertical={vertical}\n            handleLine={handleLine}\n            horLineArr={horLineArr}\n            verLineArr={verLineArr}\n            menuPosition={menuPosition}\n            handleShowRuler={handleShowRuler}\n            isShowReferLine={isShowReferLine}\n            handleShowReferLine={handleShowReferLine}\n            oncloseMenu={this.onhandlecloseMenu}\n            menuConfigs={this.menuConfigs}\n          />\n        )}\n      </StyledRuler>\n    );\n  }\n}\n\nSketchRuler.propTypes = {\n  scale: PropTypes.number,\n  ratio: PropTypes.number,\n  thick: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  shadow: PropTypes.object,\n  horLineArr: PropTypes.array,\n  verLineArr: PropTypes.array,\n  handleLine: PropTypes.func,\n  isOpenMenuFeature: PropTypes.bool,\n  handleShowRuler: PropTypes.func,\n  isShowReferLine: PropTypes.bool,\n  handleShowReferLine: PropTypes.func,\n  palette: PropTypes.shape({\n    bgColor: PropTypes.string,\n    longfgColor: PropTypes.string,\n    shortfgColor: PropTypes.string,\n    fontColor: PropTypes.string,\n    shadowColor: PropTypes.string,\n    lineColor: PropTypes.string,\n    borderColor: PropTypes.string,\n    menu: PropTypes.shape({\n      bgColor: PropTypes.string, // menu菜单\n      dividerColor: PropTypes.string, // 分割线\n      listItem: PropTypes.shape({\n        textColor: PropTypes.string, // 文本\n        hoverTextColor: PropTypes.string,\n        disabledTextColor: PropTypes.string,\n        bgColor: PropTypes.string,\n        hoverBgColor: PropTypes.string\n      })\n    })\n  })\n};\n\nSketchRuler.defaultProps = {\n  isOpenMenuFeature: false,\n  isShowReferLine: true,\n  handleShowRuler: () => {},\n  handleShowReferLine: () => {},\n  thick: 20,\n  horLineValue: [],\n  verLineValue: [],\n  scale: 1,\n  startX: 0,\n  startY: 0,\n  ratio: window.devicePixelRatio || 1,\n  shadow: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  palette: {\n    bgColor: \"#0e1013\", // ruler bg color\n    longfgColor: \"#3a4659\", // ruler longer mark color\n    shortfgColor: \"#3a4659\", // ruler shorter mark color\n    fontColor: \"#90a0ae\", // ruler font color\n    shadowColor: \"#E8E8E8\", // ruler shadow color\n    lineColor: \"rgba(0, 173, 255, 0.84)\",\n    borderColor: \"#E8E8E8\",\n    menu: DEFAULTMENU\n  }\n};\n"]},"metadata":{},"sourceType":"module"}