{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/tooltip/style\";\nimport _Tooltip from \"antd/es/tooltip\";\nimport \"antd/es/typography/style\";\nimport _Typography from \"antd/es/typography\";\nimport \"antd/es/badge/style\";\nimport _Badge from \"antd/es/badge\";\nimport _toConsumableArray from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/src/pages/fullscreen/src/header.jsx\";\n\nimport React, { Fragment } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport copyTOClipboard from \"copy-text-to-clipboard\";\nimport { connect } from \"react-redux\";\nimport { useTools, useStore } from \"~common/hooks\";\nimport { uuid } from \"~utils\";\nimport { generatorField, getFieldConf, getFieldOrderBy, orderBy } from \"~renderer/utils\";\nimport { IconFont, MonacoEditor } from \"~components\";\nimport storage from \"~utils/storage\";\n\nvar FieldActionsConf = function FieldActionsConf(_ref) {\n  var activeKey = _ref.activeKey,\n      dispatch = _ref.dispatch;\n\n  var _useTools = useTools(),\n      state = _useTools.state,\n      setState = _useTools.setState;\n\n  var _useStore = useStore(),\n      view = _useStore.view,\n      setView = _useStore.setView;\n\n  var onKeyDown = function onKeyDown(e) {\n    canUndo(e.ctrlKey || e.metaKey) && 90 === e.keyCode && (e.shiftKey ? _this.redo() : _this.undo());\n  }; // TODO: 清空\n\n\n  var handleClear = function handleClear() {\n    setView({\n      isShowReferLine: false,\n      lines: {\n        h: [],\n        v: []\n      }\n    });\n    setState({\n      components: [],\n      undo: [],\n      redo: []\n    });\n    dispatch({\n      type: \"component/activeKey\",\n      data: \"-\"\n    });\n  }; // TODO: 复制\n\n\n  var handleCopy = function handleCopy() {\n    var curFieldConf = getFieldConf(state.components, activeKey);\n\n    var _generatorField = generatorField(state.components, \"field\", curFieldConf),\n        components = _generatorField.components,\n        fieldId = _generatorField.fieldId;\n\n    setState({\n      components: components\n    });\n    dispatch({\n      type: \"component/activeKey\",\n      data: fieldId\n    });\n  }; // TODO: 删除\n\n\n  var handleDelete = function handleDelete() {\n    var _getFieldOrderBy = getFieldOrderBy(state.components, activeKey),\n        index = _getFieldOrderBy.index,\n        components = _getFieldOrderBy.components;\n\n    var fieldId;\n\n    if (components.length === 1) {\n      fieldId = \"-\";\n    } else if (index > 0) {\n      fieldId = components[index - 1].uniqueId;\n    } else {\n      fieldId = components[index + 1].uniqueId;\n    }\n\n    components.splice(index, 1);\n    setState({\n      components: components\n    });\n    dispatch({\n      type: \"component/activeKey\",\n      data: fieldId\n    });\n  }; // TODO: 上移，与前一个元素交换顺序\n\n\n  var handleUp = function handleUp() {\n    var _getFieldOrderBy2 = getFieldOrderBy(state.components, activeKey),\n        index = _getFieldOrderBy2.index,\n        components = _getFieldOrderBy2.components;\n\n    if (index - 1 >= 0) {\n      var results = orderBy(components, index, index - 1);\n      setState({\n        components: results\n      });\n    } else {\n      _message.destroy();\n\n      _message.warning(\"图层已经置顶，无法上移\");\n    }\n  }; // TODO: 下移，与后一个元素交换顺序\n\n\n  var handleDown = function handleDown() {\n    var _getFieldOrderBy3 = getFieldOrderBy(state.components, activeKey),\n        index = _getFieldOrderBy3.index,\n        components = _getFieldOrderBy3.components;\n\n    if (index + 1 < components.length) {\n      var results = orderBy(components, index, index + 1);\n      setState({\n        components: results\n      });\n    } else {\n      _message.destroy();\n\n      _message.warning(\"图层已经置底，无法下移\");\n    }\n  }; // TODO: 置顶\n\n\n  var handleTop = function handleTop() {\n    var _getFieldOrderBy4 = getFieldOrderBy(state.components, activeKey),\n        index = _getFieldOrderBy4.index,\n        components = _getFieldOrderBy4.components;\n\n    if (index - 1 >= 0) {\n      // 将要置顶的元素存储后删除\n      var temp = components.splice(index, 1)[0]; // 将元素unshift到数组第一位\n\n      components.unshift(temp);\n      setState({\n        components: components\n      });\n    } else {\n      _message.destroy();\n\n      _message.warning(\"图层已经置顶\");\n    }\n  }; // TODO: 置底\n\n\n  var handleBottom = function handleBottom() {\n    var _getFieldOrderBy5 = getFieldOrderBy(state.components, activeKey),\n        index = _getFieldOrderBy5.index,\n        components = _getFieldOrderBy5.components;\n\n    if (index + 1 < components.length) {\n      // 将要置底的元素存储后删除\n      var temp = components.splice(index, 1)[0]; // 将元素push到数组最后一位\n\n      components.push(temp);\n      setState({\n        components: components\n      });\n    } else {\n      _message.destroy();\n\n      _message.warning(\"图层已经置底\");\n    }\n  }; // TODO: 撤销\n\n\n  var handleUndo = function handleUndo() {\n    if (state.undo.length === 0) return;\n    var redoStack = [].concat(_toConsumableArray(state.redo), [state.undo.pop()]);\n    setState({\n      undo: redoStack\n    });\n  }; // TODO: 重做\n\n\n  var handleRedo = function handleRedo() {\n    if (state.redo.length === 0) return;\n    var undoStack = [].concat(_toConsumableArray(state.redo), [state.redo.pop()]);\n    setState({\n      undo: undoStack\n    });\n  };\n\n  var toggleModal = function toggleModal() {\n    return setView({\n      visible: !view.visible\n    });\n  };\n\n  var handleCopySchema = function handleCopySchema() {\n    var displaySchemaString = JSON.stringify({\n      page: state.page,\n      components: state.components\n    }, null, 4);\n    copyTOClipboard(displaySchemaString);\n\n    _message.info(\"复制成功\");\n  };\n\n  var handledevlop = function handledevlop() {\n    _message.info(\"待开发...\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"header\", {\n    className: \"gc-design__hd\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-design__hd--title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Typography.Title, {\n    level: 4,\n    className: \"gc-design__hd--h1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, \"Axure v2\\xA0\", /*#__PURE__*/React.createElement(_Badge, {\n    status: \"processing\",\n    text: \"Beta\\u6D4B\\u8BD5\\u7248\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-design__hd--icon\",\n    onClick: function onClick() {\n      setView({\n        layerCollapsed: !view.layerCollapsed\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, !view.layerCollapsed ? /*#__PURE__*/React.createElement(_Tooltip, {\n    title: \"\\u5173\\u95ED\\u4FA7\\u8FB9\\u680F\",\n    key: \"\\u5173\\u95ED\\u4FA7\\u8FB9\\u680F\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconFont, {\n    antd: true,\n    type: \"LeftSquareOutlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(_Tooltip, {\n    title: \"\\u6253\\u5F00\\u4FA7\\u8FB9\\u680F\",\n    key: \"\\u6253\\u5F00\\u4FA7\\u8FB9\\u680F\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconFont, {\n    antd: true,\n    type: \"RightSquareOutlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(_Space, {\n    className: \"gc-design__hd--action\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    disabled: activeKey === \"-\",\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"CopyOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 52\n      }\n    }),\n    onClick: handleCopy,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, \"\\u590D\\u5236\"), /*#__PURE__*/React.createElement(_Button, {\n    disabled: activeKey === \"-\",\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"DeleteOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }),\n    onClick: handleDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, \"\\u5220\\u9664\"), /*#__PURE__*/React.createElement(_Button, {\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"ClearOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 23\n      }\n    }),\n    onClick: handleClear,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, \"\\u6E05\\u7A7A\"), /*#__PURE__*/React.createElement(_Button, {\n    disabled: activeKey === \"-\",\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"SwapLeftOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 52\n      }\n    }),\n    onClick: handleUp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }, \"\\u4E0A\\u4E00\\u5C42\"), /*#__PURE__*/React.createElement(_Button, {\n    disabled: activeKey === \"-\",\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"SwapRightOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }),\n    onClick: handleDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, \"\\u4E0B\\u4E00\\u5C42\"), /*#__PURE__*/React.createElement(_Button, {\n    disabled: activeKey === \"-\",\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"VerticalAlignTopOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }),\n    onClick: handleTop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, \"\\u7F6E\\u9876\"), /*#__PURE__*/React.createElement(_Button, {\n    disabled: activeKey === \"-\",\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"VerticalAlignBottomOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }),\n    onClick: handleBottom,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, \"\\u7F6E\\u5E95\"), /*#__PURE__*/React.createElement(_Button, {\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"UndoOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 23\n      }\n    }),\n    onClick: handledevlop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }, \"\\u64A4\\u9500\"), /*#__PURE__*/React.createElement(_Button, {\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"RedoOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }\n    }),\n    onClick: handledevlop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }\n  }, \"\\u91CD\\u505A\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-design__hd--setting\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-design__hd--icon\",\n    onClick: function onClick() {\n      setView({\n        settingCollapsed: !view.settingCollapsed\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, !view.settingCollapsed ? /*#__PURE__*/React.createElement(_Tooltip, {\n    title: \"\\u5173\\u95ED\\u914D\\u7F6E\",\n    key: \"\\u5173\\u95ED\\u914D\\u7F6E\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconFont, {\n    antd: true,\n    type: \"RightSquareOutlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(_Tooltip, {\n    title: \"\\u6253\\u5F00\\u914D\\u7F6E\",\n    key: \"\\u5173\\u95ED\\u914D\\u7F6E\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IconFont, {\n    antd: true,\n    type: \"LeftSquareOutlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(_Space, {\n    className: \"gc-design__hd--save\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    icon: /*#__PURE__*/React.createElement(Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/fullscreen/preview/\" + uuid(),\n      target: \"_blank\",\n      onClick: function onClick() {\n        storage.setLocal(\"schema_screen_config\", {\n          page: state.page,\n          components: state.components\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"DesktopOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 19\n      }\n    }), \"\\u9884\\u89C8\")),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(_Button, {\n    icon: /*#__PURE__*/React.createElement(IconFont, {\n      antd: true,\n      type: \"CodepenOutlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 25\n      }\n    }),\n    onClick: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  }, \"\\u8C03\\u8BD5\"))), /*#__PURE__*/React.createElement(_Modal, {\n    visible: view.visible,\n    title: \"\\u8C03\\u8BD5\",\n    width: 960,\n    okText: \"\\u590D\\u5236\\u914D\\u7F6E\",\n    cancelText: \"\\u53D6\\u6D88\",\n    onOk: handleCopySchema,\n    onCancel: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MonacoEditor, {\n    height: 600,\n    language: \"json\",\n    value: {\n      page: state.page,\n      components: state.components\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default connect(function (state) {\n  return {\n    activeKey: state.component.activeKey\n  };\n})(FieldActionsConf);","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/图元/react-visual-data/src/pages/fullscreen/src/header.jsx"],"names":["React","Fragment","Link","copyTOClipboard","connect","useTools","useStore","uuid","generatorField","getFieldConf","getFieldOrderBy","orderBy","IconFont","MonacoEditor","storage","FieldActionsConf","activeKey","dispatch","state","setState","view","setView","onKeyDown","e","canUndo","ctrlKey","metaKey","keyCode","shiftKey","redo","undo","handleClear","isShowReferLine","lines","h","v","components","type","data","handleCopy","curFieldConf","fieldId","handleDelete","index","length","uniqueId","splice","handleUp","results","destroy","warning","handleDown","handleTop","temp","unshift","handleBottom","push","handleUndo","redoStack","pop","handleRedo","undoStack","toggleModal","visible","handleCopySchema","displaySchemaString","JSON","stringify","page","info","handledevlop","layerCollapsed","settingCollapsed","setLocal","component"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,eAAP,MAA4B,wBAA5B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,eAAnC;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,eAAvC,EAAwDC,OAAxD,QAAuE,iBAAvE;AAEA,SAASC,QAAT,EAAmBC,YAAnB,QAAuC,aAAvC;AACA,OAAOC,OAAP,MAAoB,gBAApB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,OAA6B;AAAA,MAA1BC,SAA0B,QAA1BA,SAA0B;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,kBACxBZ,QAAQ,EADgB;AAAA,MAC5Ca,KAD4C,aAC5CA,KAD4C;AAAA,MACrCC,QADqC,aACrCA,QADqC;;AAAA,kBAE1Bb,QAAQ,EAFkB;AAAA,MAE5Cc,IAF4C,aAE5CA,IAF4C;AAAA,MAEtCC,OAFsC,aAEtCA,OAFsC;;AAIpD,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD,EAAO;AACvBC,IAAAA,OAAO,CAACD,CAAC,CAACE,OAAF,IAAaF,CAAC,CAACG,OAAhB,CAAP,IAAmC,OAAOH,CAAC,CAACI,OAA5C,KAAwDJ,CAAC,CAACK,QAAF,GAAa,KAAI,CAACC,IAAL,EAAb,GAA2B,KAAI,CAACC,IAAL,EAAnF;AACD,GAFD,CAJoD,CAQpD;;;AACA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxBV,IAAAA,OAAO,CAAC;AACNW,MAAAA,eAAe,EAAE,KADX;AAENC,MAAAA,KAAK,EAAE;AACLC,QAAAA,CAAC,EAAE,EADE;AAELC,QAAAA,CAAC,EAAE;AAFE;AAFD,KAAD,CAAP;AAOAhB,IAAAA,QAAQ,CAAC;AACPiB,MAAAA,UAAU,EAAE,EADL;AAEPN,MAAAA,IAAI,EAAE,EAFC;AAGPD,MAAAA,IAAI,EAAE;AAHC,KAAD,CAAR;AAMAZ,IAAAA,QAAQ,CAAC;AAAEoB,MAAAA,IAAI,EAAE,qBAAR;AAA+BC,MAAAA,IAAI,EAAE;AAArC,KAAD,CAAR;AACD,GAfD,CAToD,CA0BpD;;;AACA,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,QAAMC,YAAY,GAAG/B,YAAY,CAACS,KAAK,CAACkB,UAAP,EAAmBpB,SAAnB,CAAjC;;AADuB,0BAESR,cAAc,CAACU,KAAK,CAACkB,UAAP,EAAmB,OAAnB,EAA4BI,YAA5B,CAFvB;AAAA,QAEfJ,UAFe,mBAEfA,UAFe;AAAA,QAEHK,OAFG,mBAEHA,OAFG;;AAGvBtB,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,UAAU,EAAEA;AAAd,KAAD,CAAR;AAEAnB,IAAAA,QAAQ,CAAC;AAAEoB,MAAAA,IAAI,EAAE,qBAAR;AAA+BC,MAAAA,IAAI,EAAEG;AAArC,KAAD,CAAR;AACD,GAND,CA3BoD,CAmCpD;;;AACA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA,2BACKhC,eAAe,CAACQ,KAAK,CAACkB,UAAP,EAAmBpB,SAAnB,CADpB;AAAA,QACjB2B,KADiB,oBACjBA,KADiB;AAAA,QACVP,UADU,oBACVA,UADU;;AAEzB,QAAIK,OAAJ;;AACA,QAAIL,UAAU,CAACQ,MAAX,KAAsB,CAA1B,EAA6B;AAC3BH,MAAAA,OAAO,GAAG,GAAV;AACD,KAFD,MAEO,IAAIE,KAAK,GAAG,CAAZ,EAAe;AACpBF,MAAAA,OAAO,GAAGL,UAAU,CAACO,KAAK,GAAG,CAAT,CAAV,CAAsBE,QAAhC;AACD,KAFM,MAEA;AACLJ,MAAAA,OAAO,GAAGL,UAAU,CAACO,KAAK,GAAG,CAAT,CAAV,CAAsBE,QAAhC;AACD;;AACDT,IAAAA,UAAU,CAACU,MAAX,CAAkBH,KAAlB,EAAyB,CAAzB;AACAxB,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,UAAU,EAAEA;AAAd,KAAD,CAAR;AAEAnB,IAAAA,QAAQ,CAAC;AAAEoB,MAAAA,IAAI,EAAE,qBAAR;AAA+BC,MAAAA,IAAI,EAAEG;AAArC,KAAD,CAAR;AACD,GAdD,CApCoD,CAoDpD;;;AACA,MAAMM,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAAA,4BACSrC,eAAe,CAACQ,KAAK,CAACkB,UAAP,EAAmBpB,SAAnB,CADxB;AAAA,QACb2B,KADa,qBACbA,KADa;AAAA,QACNP,UADM,qBACNA,UADM;;AAGrB,QAAIO,KAAK,GAAG,CAAR,IAAa,CAAjB,EAAoB;AAClB,UAAMK,OAAO,GAAGrC,OAAO,CAACyB,UAAD,EAAaO,KAAb,EAAoBA,KAAK,GAAG,CAA5B,CAAvB;AACAxB,MAAAA,QAAQ,CAAC;AAAEiB,QAAAA,UAAU,EAAEY;AAAd,OAAD,CAAR;AACD,KAHD,MAGO;AACL,eAAQC,OAAR;;AACA,eAAQC,OAAR,CAAgB,aAAhB;AACD;AACF,GAVD,CArDoD,CAiEpD;;;AACA,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAAA,4BACOzC,eAAe,CAACQ,KAAK,CAACkB,UAAP,EAAmBpB,SAAnB,CADtB;AAAA,QACf2B,KADe,qBACfA,KADe;AAAA,QACRP,UADQ,qBACRA,UADQ;;AAGvB,QAAIO,KAAK,GAAG,CAAR,GAAYP,UAAU,CAACQ,MAA3B,EAAmC;AACjC,UAAMI,OAAO,GAAGrC,OAAO,CAACyB,UAAD,EAAaO,KAAb,EAAoBA,KAAK,GAAG,CAA5B,CAAvB;AACAxB,MAAAA,QAAQ,CAAC;AAAEiB,QAAAA,UAAU,EAAEY;AAAd,OAAD,CAAR;AACD,KAHD,MAGO;AACL,eAAQC,OAAR;;AACA,eAAQC,OAAR,CAAgB,aAAhB;AACD;AACF,GAVD,CAlEoD,CA8EpD;;;AACA,MAAME,SAAS,GAAG,SAAZA,SAAY,GAAM;AAAA,4BACQ1C,eAAe,CAACQ,KAAK,CAACkB,UAAP,EAAmBpB,SAAnB,CADvB;AAAA,QACd2B,KADc,qBACdA,KADc;AAAA,QACPP,UADO,qBACPA,UADO;;AAGtB,QAAIO,KAAK,GAAG,CAAR,IAAa,CAAjB,EAAoB;AAClB;AACA,UAAMU,IAAI,GAAGjB,UAAU,CAACU,MAAX,CAAkBH,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,CAAb,CAFkB,CAGlB;;AACAP,MAAAA,UAAU,CAACkB,OAAX,CAAmBD,IAAnB;AACAlC,MAAAA,QAAQ,CAAC;AAAEiB,QAAAA,UAAU,EAAEA;AAAd,OAAD,CAAR;AACD,KAND,MAMO;AACL,eAAQa,OAAR;;AACA,eAAQC,OAAR,CAAgB,QAAhB;AACD;AACF,GAbD,CA/EoD,CA8FpD;;;AACA,MAAMK,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA,4BACK7C,eAAe,CAACQ,KAAK,CAACkB,UAAP,EAAmBpB,SAAnB,CADpB;AAAA,QACjB2B,KADiB,qBACjBA,KADiB;AAAA,QACVP,UADU,qBACVA,UADU;;AAGzB,QAAIO,KAAK,GAAG,CAAR,GAAYP,UAAU,CAACQ,MAA3B,EAAmC;AACjC;AACA,UAAMS,IAAI,GAAGjB,UAAU,CAACU,MAAX,CAAkBH,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,CAAb,CAFiC,CAGjC;;AACAP,MAAAA,UAAU,CAACoB,IAAX,CAAgBH,IAAhB;AACAlC,MAAAA,QAAQ,CAAC;AAAEiB,QAAAA,UAAU,EAAEA;AAAd,OAAD,CAAR;AACD,KAND,MAMO;AACL,eAAQa,OAAR;;AACA,eAAQC,OAAR,CAAgB,QAAhB;AACD;AACF,GAbD,CA/FoD,CA8GpD;;;AACA,MAAMO,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,QAAIvC,KAAK,CAACY,IAAN,CAAWc,MAAX,KAAsB,CAA1B,EAA6B;AAC7B,QAAIc,SAAS,gCAAOxC,KAAK,CAACW,IAAb,IAAmBX,KAAK,CAACY,IAAN,CAAW6B,GAAX,EAAnB,EAAb;AACAxC,IAAAA,QAAQ,CAAC;AAAEW,MAAAA,IAAI,EAAE4B;AAAR,KAAD,CAAR;AACD,GAJD,CA/GoD,CAqHpD;;;AACA,MAAME,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,QAAI1C,KAAK,CAACW,IAAN,CAAWe,MAAX,KAAsB,CAA1B,EAA6B;AAC7B,QAAIiB,SAAS,gCAAO3C,KAAK,CAACW,IAAb,IAAmBX,KAAK,CAACW,IAAN,CAAW8B,GAAX,EAAnB,EAAb;AACAxC,IAAAA,QAAQ,CAAC;AAAEW,MAAAA,IAAI,EAAE+B;AAAR,KAAD,CAAR;AACD,GAJD;;AAMA,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMzC,OAAO,CAAC;AAAE0C,MAAAA,OAAO,EAAE,CAAC3C,IAAI,CAAC2C;AAAjB,KAAD,CAAb;AAAA,GAApB;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,QAAIC,mBAAmB,GAAGC,IAAI,CAACC,SAAL,CACxB;AACEC,MAAAA,IAAI,EAAElD,KAAK,CAACkD,IADd;AAEEhC,MAAAA,UAAU,EAAElB,KAAK,CAACkB;AAFpB,KADwB,EAKxB,IALwB,EAMxB,CANwB,CAA1B;AAQAjC,IAAAA,eAAe,CAAC8D,mBAAD,CAAf;;AACA,aAAQI,IAAR,CAAa,MAAb;AACD,GAXD;;AAaA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,aAAQD,IAAR,CAAa,QAAb;AACD,GAFD;;AAIA,sBACE;AAAQ,IAAA,SAAS,EAAC,eAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,gCAAY,KAAZ;AAAkB,IAAA,KAAK,EAAE,CAAzB;AAA4B,IAAA,SAAS,EAAC,mBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAEE;AAAO,IAAA,MAAM,EAAC,YAAd;AAA2B,IAAA,IAAI,EAAC,wBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,eAKE;AACE,IAAA,SAAS,EAAC,qBADZ;AAEE,IAAA,OAAO,EAAE,mBAAM;AACbhD,MAAAA,OAAO,CAAC;AACNkD,QAAAA,cAAc,EAAE,CAACnD,IAAI,CAACmD;AADhB,OAAD,CAAP;AAGD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQG,CAACnD,IAAI,CAACmD,cAAN,gBACC;AAAS,IAAA,KAAK,EAAC,gCAAf;AAAuB,IAAA,GAAG,EAAC,gCAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAE,IAAhB;AAAsB,IAAA,IAAI,EAAC,oBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,gBAKC;AAAS,IAAA,KAAK,EAAC,gCAAf;AAAuB,IAAA,GAAG,EAAC,gCAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAE,IAAhB;AAAsB,IAAA,IAAI,EAAC,qBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAbJ,CALF,CADF,eAyBE;AAAO,IAAA,SAAS,EAAC,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,QAAQ,EAAEvD,SAAS,KAAK,GAAhC;AAAqC,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,cAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA3C;AAAyF,IAAA,OAAO,EAAEuB,UAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AACE,IAAA,QAAQ,EAAEvB,SAAS,KAAK,GAD1B;AAEE,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,gBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR;AAGE,IAAA,OAAO,EAAE0B,YAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,eAWE;AAAQ,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,eAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAd;AAA6D,IAAA,OAAO,EAAEX,WAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXF,eAcE;AAAQ,IAAA,QAAQ,EAAEf,SAAS,KAAK,GAAhC;AAAqC,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,kBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA3C;AAA6F,IAAA,OAAO,EAAE+B,QAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAdF,eAiBE;AACE,IAAA,QAAQ,EAAE/B,SAAS,KAAK,GAD1B;AAEE,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,mBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR;AAGE,IAAA,OAAO,EAAEmC,UAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAjBF,eAwBE;AACE,IAAA,QAAQ,EAAEnC,SAAS,KAAK,GAD1B;AAEE,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,0BAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR;AAGE,IAAA,OAAO,EAAEoC,SAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAxBF,eA+BE;AACE,IAAA,QAAQ,EAAEpC,SAAS,KAAK,GAD1B;AAEE,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,6BAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR;AAGE,IAAA,OAAO,EAAEuC,YAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA/BF,eAsCE;AAAQ,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,cAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAd;AAA4D,IAAA,OAAO,EAAEe,YAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAtCF,eAyCE;AAAQ,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,cAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAd;AAA4D,IAAA,OAAO,EAAEA,YAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAzCF,CAzBF,eAsEE;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,qBADZ;AAEE,IAAA,OAAO,EAAE,mBAAM;AACbjD,MAAAA,OAAO,CAAC;AACNmD,QAAAA,gBAAgB,EAAE,CAACpD,IAAI,CAACoD;AADlB,OAAD,CAAP;AAGD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQG,CAACpD,IAAI,CAACoD,gBAAN,gBACC;AAAS,IAAA,KAAK,EAAC,0BAAf;AAAsB,IAAA,GAAG,EAAC,0BAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAE,IAAhB;AAAsB,IAAA,IAAI,EAAC,qBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,gBAKC;AAAS,IAAA,KAAK,EAAC,0BAAf;AAAsB,IAAA,GAAG,EAAC,0BAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAE,IAAhB;AAAsB,IAAA,IAAI,EAAC,oBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAbJ,CADF,eAmBE;AAAO,IAAA,SAAS,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,eACF,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AACE,MAAA,EAAE,EAAE,yBAAyBjE,IAAI,EADnC;AAEE,MAAA,MAAM,EAAC,QAFT;AAGE,MAAA,OAAO,EAAE,mBAAM;AACbO,QAAAA,OAAO,CAAC2D,QAAR,CAAiB,sBAAjB,EAAyC;AACvCL,UAAAA,IAAI,EAAElD,KAAK,CAACkD,IAD2B;AAEvChC,UAAAA,UAAU,EAAElB,KAAK,CAACkB;AAFqB,SAAzC;AAID,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAUE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,iBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,iBADF,CAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAoBE;AAAQ,IAAA,IAAI,eAAE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAE,IAAhB;AAAsB,MAAA,IAAI,EAAC,iBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAd;AAA+D,IAAA,OAAO,EAAE0B,WAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBApBF,CAnBF,CAtEF,eAmHE;AACE,IAAA,OAAO,EAAE1C,IAAI,CAAC2C,OADhB;AAEE,IAAA,KAAK,EAAC,cAFR;AAGE,IAAA,KAAK,EAAE,GAHT;AAIE,IAAA,MAAM,EAAC,0BAJT;AAKE,IAAA,UAAU,EAAC,cALb;AAME,IAAA,IAAI,EAAEC,gBANR;AAOE,IAAA,QAAQ,EAAEF,WAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASE,oBAAC,YAAD;AACE,IAAA,MAAM,EAAE,GADV;AAEE,IAAA,QAAQ,EAAC,MAFX;AAGE,IAAA,KAAK,EAAE;AACLM,MAAAA,IAAI,EAAElD,KAAK,CAACkD,IADP;AAELhC,MAAAA,UAAU,EAAElB,KAAK,CAACkB;AAFb,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAnHF,CADF;AAwID,CAvRD;;AAyRA,eAAehC,OAAO,CAAC,UAACc,KAAD;AAAA,SAAY;AACjCF,IAAAA,SAAS,EAAEE,KAAK,CAACwD,SAAN,CAAgB1D;AADM,GAAZ;AAAA,CAAD,CAAP,CAEXD,gBAFW,CAAf","sourcesContent":["import React, { Fragment } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Modal, Space, Button, Typography, Badge, message, Tooltip } from \"antd\";\nimport copyTOClipboard from \"copy-text-to-clipboard\";\nimport { connect } from \"react-redux\";\nimport { useTools, useStore } from \"~common/hooks\";\nimport { uuid } from \"~utils\";\nimport { generatorField, getFieldConf, getFieldOrderBy, orderBy } from \"~renderer/utils\";\n\nimport { IconFont, MonacoEditor } from \"~components\";\nimport storage from \"~utils/storage\";\n\nconst FieldActionsConf = ({ activeKey, dispatch }) => {\n  const { state, setState } = useTools();\n  const { view, setView } = useStore();\n\n  const onKeyDown = (e) => {\n    canUndo(e.ctrlKey || e.metaKey) && 90 === e.keyCode && (e.shiftKey ? this.redo() : this.undo());\n  };\n\n  // TODO: 清空\n  const handleClear = () => {\n    setView({\n      isShowReferLine: false,\n      lines: {\n        h: [],\n        v: []\n      }\n    });\n    setState({\n      components: [],\n      undo: [],\n      redo: []\n    });\n\n    dispatch({ type: \"component/activeKey\", data: \"-\" });\n  };\n\n  // TODO: 复制\n  const handleCopy = () => {\n    const curFieldConf = getFieldConf(state.components, activeKey);\n    const { components, fieldId } = generatorField(state.components, \"field\", curFieldConf);\n    setState({ components: components });\n\n    dispatch({ type: \"component/activeKey\", data: fieldId });\n  };\n\n  // TODO: 删除\n  const handleDelete = () => {\n    const { index, components } = getFieldOrderBy(state.components, activeKey);\n    let fieldId;\n    if (components.length === 1) {\n      fieldId = \"-\";\n    } else if (index > 0) {\n      fieldId = components[index - 1].uniqueId;\n    } else {\n      fieldId = components[index + 1].uniqueId;\n    }\n    components.splice(index, 1);\n    setState({ components: components });\n\n    dispatch({ type: \"component/activeKey\", data: fieldId });\n  };\n\n  // TODO: 上移，与前一个元素交换顺序\n  const handleUp = () => {\n    const { index, components } = getFieldOrderBy(state.components, activeKey);\n\n    if (index - 1 >= 0) {\n      const results = orderBy(components, index, index - 1);\n      setState({ components: results });\n    } else {\n      message.destroy();\n      message.warning(\"图层已经置顶，无法上移\");\n    }\n  };\n\n  // TODO: 下移，与后一个元素交换顺序\n  const handleDown = () => {\n    const { index, components } = getFieldOrderBy(state.components, activeKey);\n\n    if (index + 1 < components.length) {\n      const results = orderBy(components, index, index + 1);\n      setState({ components: results });\n    } else {\n      message.destroy();\n      message.warning(\"图层已经置底，无法下移\");\n    }\n  };\n\n  // TODO: 置顶\n  const handleTop = () => {\n    const { index, components } = getFieldOrderBy(state.components, activeKey);\n\n    if (index - 1 >= 0) {\n      // 将要置顶的元素存储后删除\n      const temp = components.splice(index, 1)[0];\n      // 将元素unshift到数组第一位\n      components.unshift(temp);\n      setState({ components: components });\n    } else {\n      message.destroy();\n      message.warning(\"图层已经置顶\");\n    }\n  };\n\n  // TODO: 置底\n  const handleBottom = () => {\n    const { index, components } = getFieldOrderBy(state.components, activeKey);\n\n    if (index + 1 < components.length) {\n      // 将要置底的元素存储后删除\n      const temp = components.splice(index, 1)[0];\n      // 将元素push到数组最后一位\n      components.push(temp);\n      setState({ components: components });\n    } else {\n      message.destroy();\n      message.warning(\"图层已经置底\");\n    }\n  };\n\n  // TODO: 撤销\n  const handleUndo = () => {\n    if (state.undo.length === 0) return;\n    let redoStack = [...state.redo, state.undo.pop()];\n    setState({ undo: redoStack });\n  };\n\n  // TODO: 重做\n  const handleRedo = () => {\n    if (state.redo.length === 0) return;\n    let undoStack = [...state.redo, state.redo.pop()];\n    setState({ undo: undoStack });\n  };\n\n  const toggleModal = () => setView({ visible: !view.visible });\n\n  const handleCopySchema = () => {\n    let displaySchemaString = JSON.stringify(\n      {\n        page: state.page,\n        components: state.components\n      },\n      null,\n      4\n    );\n    copyTOClipboard(displaySchemaString);\n    message.info(\"复制成功\");\n  };\n\n  const handledevlop = () => {\n    message.info(\"待开发...\");\n  };\n\n  return (\n    <header className=\"gc-design__hd\">\n      <div className=\"gc-design__hd--title\">\n        <Typography.Title level={4} className=\"gc-design__hd--h1\">\n          Axure v2&nbsp;\n          <Badge status=\"processing\" text=\"Beta测试版\" />\n        </Typography.Title>\n        <div\n          className=\"gc-design__hd--icon\"\n          onClick={() => {\n            setView({\n              layerCollapsed: !view.layerCollapsed\n            });\n          }}\n        >\n          {!view.layerCollapsed ? (\n            <Tooltip title=\"关闭侧边栏\" key=\"关闭侧边栏\">\n              <IconFont antd={true} type=\"LeftSquareOutlined\" />\n            </Tooltip>\n          ) : (\n            <Tooltip title=\"打开侧边栏\" key=\"打开侧边栏\">\n              <IconFont antd={true} type=\"RightSquareOutlined\" />\n            </Tooltip>\n          )}\n        </div>\n      </div>\n      <Space className=\"gc-design__hd--action\">\n        <Button disabled={activeKey === \"-\"} icon={<IconFont antd={true} type=\"CopyOutlined\" />} onClick={handleCopy}>\n          复制\n        </Button>\n        <Button\n          disabled={activeKey === \"-\"}\n          icon={<IconFont antd={true} type=\"DeleteOutlined\" />}\n          onClick={handleDelete}\n        >\n          删除\n        </Button>\n        <Button icon={<IconFont antd={true} type=\"ClearOutlined\" />} onClick={handleClear}>\n          清空\n        </Button>\n        <Button disabled={activeKey === \"-\"} icon={<IconFont antd={true} type=\"SwapLeftOutlined\" />} onClick={handleUp}>\n          上一层\n        </Button>\n        <Button\n          disabled={activeKey === \"-\"}\n          icon={<IconFont antd={true} type=\"SwapRightOutlined\" />}\n          onClick={handleDown}\n        >\n          下一层\n        </Button>\n        <Button\n          disabled={activeKey === \"-\"}\n          icon={<IconFont antd={true} type=\"VerticalAlignTopOutlined\" />}\n          onClick={handleTop}\n        >\n          置顶\n        </Button>\n        <Button\n          disabled={activeKey === \"-\"}\n          icon={<IconFont antd={true} type=\"VerticalAlignBottomOutlined\" />}\n          onClick={handleBottom}\n        >\n          置底\n        </Button>\n        <Button icon={<IconFont antd={true} type=\"UndoOutlined\" />} onClick={handledevlop}>\n          撤销\n        </Button>\n        <Button icon={<IconFont antd={true} type=\"RedoOutlined\" />} onClick={handledevlop}>\n          重做\n        </Button>\n      </Space>\n      <div className=\"gc-design__hd--setting\">\n        <div\n          className=\"gc-design__hd--icon\"\n          onClick={() => {\n            setView({\n              settingCollapsed: !view.settingCollapsed\n            });\n          }}\n        >\n          {!view.settingCollapsed ? (\n            <Tooltip title=\"关闭配置\" key=\"关闭配置\">\n              <IconFont antd={true} type=\"RightSquareOutlined\" />\n            </Tooltip>\n          ) : (\n            <Tooltip title=\"打开配置\" key=\"关闭配置\">\n              <IconFont antd={true} type=\"LeftSquareOutlined\" />\n            </Tooltip>\n          )}\n        </div>\n        <Space className=\"gc-design__hd--save\">\n          <Button\n            icon={\n              <Fragment>\n                <Link\n                  to={\"/fullscreen/preview/\" + uuid()}\n                  target=\"_blank\"\n                  onClick={() => {\n                    storage.setLocal(\"schema_screen_config\", {\n                      page: state.page,\n                      components: state.components\n                    });\n                  }}\n                >\n                  <IconFont antd={true} type=\"DesktopOutlined\" />\n                  预览\n                </Link>\n              </Fragment>\n            }\n          ></Button>\n          <Button icon={<IconFont antd={true} type=\"CodepenOutlined\" />} onClick={toggleModal}>\n            调试\n          </Button>\n        </Space>\n      </div>\n      {/* 模态框 */}\n      <Modal\n        visible={view.visible}\n        title=\"调试\"\n        width={960}\n        okText=\"复制配置\"\n        cancelText=\"取消\"\n        onOk={handleCopySchema}\n        onCancel={toggleModal}\n      >\n        <MonacoEditor\n          height={600}\n          language=\"json\"\n          value={{\n            page: state.page,\n            components: state.components\n          }}\n        />\n      </Modal>\n    </header>\n  );\n};\n\nexport default connect((state) => ({\n  activeKey: state.component.activeKey\n}))(FieldActionsConf);\n"]},"metadata":{},"sourceType":"module"}