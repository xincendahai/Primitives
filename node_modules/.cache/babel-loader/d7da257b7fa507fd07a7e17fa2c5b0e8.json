{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/materials/decoration/src/decoration4.js\";\n\nimport React, { useRef, forwardRef, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAutoResize } from \"~common/hooks\";\nimport { uuid } from \"~utils\";\nimport { hexToRgb } from \"~utils\";\nvar defaultColor = [\"#2783ce\", \"#2cf7fe\"];\nvar segment = 30;\nvar sectorAngle = Math.PI / 3;\nvar ringNum = 3;\nvar ringWidth = 1;\nvar BorderBox = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      style = _ref.style;\n  var gId = useRef(\"decoration-\".concat(uuid())).current;\n  var gradientId = useRef(\"decoration-gradient-\".concat(uuid())).current;\n\n  var _useAutoResize = useAutoResize(ref),\n      width = _useAutoResize.width,\n      height = _useAutoResize.height,\n      domRef = _useAutoResize.domRef;\n\n  var x = width / 2;\n  var y = height / 2;\n\n  function getCircleRadianPoint(x, y, radius, radian) {\n    return [x + Math.cos(radian) * radius, y + Math.sin(radian) * radius];\n  }\n\n  function calcPathD() {\n    var startAngle = -Math.PI / 2;\n    var angleGap = sectorAngle / segment;\n    var r = width / 4;\n    var lastEndPoints = getCircleRadianPoint(x, y, r, startAngle);\n    return new Array(segment).fill(\"\").map(function (_, i) {\n      var endPoints = getCircleRadianPoint(x, y, r, startAngle - (i + 1) * angleGap).map(function (_) {\n        return _.toFixed(5);\n      });\n      var d = \"M\".concat(lastEndPoints.join(\",\"), \" A\").concat(r, \", \").concat(r, \" 0 0 0 \").concat(endPoints.join(\",\"));\n      lastEndPoints = endPoints;\n      return d;\n    });\n  }\n\n  function calcPathColor() {\n    var colorGap = 100 / (segment - 1);\n    return new Array(segment).fill(defaultColor[0]).map(function (_, i) {\n      return hexToRgb(defaultColor[0], 100 - i * colorGap);\n    });\n  }\n\n  function calcCircleR() {\n    var radiusGap = Math.abs((width / 2 - ringWidth / 2) / ringNum);\n    return new Array(ringNum).fill(0).map(function (_, i) {\n      return radiusGap * (i + 1);\n    });\n  }\n\n  function calcSplitLinePoints() {\n    var angleGap = Math.PI / 6;\n    var r = width / 2;\n    return new Array(6).fill(\"\").map(function (_, i) {\n      var startAngle = angleGap * (i + 1);\n      var endAngle = startAngle + Math.PI;\n      var startPoint = getCircleRadianPoint(x, y, r, startAngle);\n      var endPoint = getCircleRadianPoint(x, y, r, endAngle);\n      return \"\".concat(startPoint.join(\",\"), \" \").concat(endPoint.join(\",\"));\n    });\n  }\n\n  function calcArcD() {\n    var angleGap = Math.PI / 6;\n    var r = width / 2 - 1;\n    return new Array(4).fill(\"\").map(function (_, i) {\n      var startAngle = angleGap * (3 * i + 1);\n      var endAngle = startAngle + angleGap;\n      var startPoint = getCircleRadianPoint(x, y, r, startAngle);\n      var endPoint = getCircleRadianPoint(x, y, r, endAngle);\n      return \"M\".concat(startPoint.join(\",\"), \" A\").concat(x, \", \").concat(y, \" 0 0 1 \").concat(endPoint.join(\",\"));\n    });\n  }\n\n  function calcSVGData() {\n    return {\n      pathD: calcPathD(),\n      pathColor: calcPathColor(),\n      circleR: calcCircleR(),\n      splitLinePoints: calcSplitLinePoints(),\n      arcD: calcArcD()\n    };\n  }\n\n  var _useMemo = useMemo(calcSVGData, [width, height]),\n      pathD = _useMemo.pathD,\n      pathColor = _useMemo.pathColor,\n      circleR = _useMemo.circleR,\n      splitLinePoints = _useMemo.splitLinePoints,\n      arcD = _useMemo.arcD;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-containers\",\n    style: style,\n    ref: domRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"defs\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: gId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, pathD.map(function (o, i) {\n    return /*#__PURE__*/React.createElement(\"path\", {\n      stroke: pathColor[i],\n      strokeWidth: x,\n      fill: \"transparent\",\n      key: i,\n      d: o,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: gradientId,\n    cx: \"50%\",\n    cy: \"50%\",\n    r: \"50%\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"transparent\",\n    stopOpacity: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: hexToRgb(defaultColor[1], 30),\n    stopOpacity: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }))), circleR.map(function (r, i) {\n    return /*#__PURE__*/React.createElement(\"circle\", {\n      key: i,\n      r: r,\n      cx: x,\n      cy: y,\n      stroke: defaultColor[1],\n      strokeWidth: \"0.5\",\n      fill: \"transparent\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    r: \"1\",\n    cx: x,\n    cy: y,\n    stroke: \"transparent\",\n    fill: \"url(#\".concat(gradientId, \")\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"r\",\n    values: \"1;\".concat(x),\n    dur: \"2s\",\n    repeatCount: \"indefinite\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"animate\", {\n    attributeName: \"opacity\",\n    values: \"1;0\",\n    dur: \"2s\",\n    repeatCount: \"indefinite\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"circle\", {\n    r: \"2\",\n    cx: x,\n    cy: y,\n    fill: defaultColor[1],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, splitLinePoints.map(function (p, i) {\n    return /*#__PURE__*/React.createElement(\"polyline\", {\n      key: i,\n      points: p,\n      stroke: defaultColor[1],\n      strokeWidth: \"0.5\",\n      opacity: \"0.5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    });\n  })), arcD.map(function (p, i) {\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: i,\n      d: p,\n      stroke: defaultColor[1],\n      strokeWidth: \"2\",\n      fill: \"transparent\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"#\".concat(gId),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"animateTransform\", {\n    attributeName: \"transform\",\n    type: \"rotate\",\n    values: \"0, \".concat(x, \" \").concat(y, \";360, \").concat(x, \" \").concat(y),\n    dur: \"3s\",\n    repeatCount: \"indefinite\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"decoration-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, children));\n});\nBorderBox.propTypes = {\n  children: PropTypes.node,\n  style: PropTypes.object\n};\nexport default BorderBox;","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/materials/decoration/src/decoration4.js"],"names":["React","useRef","forwardRef","useMemo","PropTypes","useAutoResize","uuid","hexToRgb","defaultColor","segment","sectorAngle","Math","PI","ringNum","ringWidth","BorderBox","ref","children","style","gId","current","gradientId","width","height","domRef","x","y","getCircleRadianPoint","radius","radian","cos","sin","calcPathD","startAngle","angleGap","r","lastEndPoints","Array","fill","map","_","i","endPoints","toFixed","d","join","calcPathColor","colorGap","calcCircleR","radiusGap","abs","calcSplitLinePoints","endAngle","startPoint","endPoint","calcArcD","calcSVGData","pathD","pathColor","circleR","splitLinePoints","arcD","o","p","propTypes","node","object"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,QAAmD,OAAnD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,SAASC,aAAT,QAA8B,eAA9B;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,QAAT,QAAyB,QAAzB;AAEA,IAAMC,YAAY,GAAG,CAAC,SAAD,EAAY,SAAZ,CAArB;AACA,IAAMC,OAAO,GAAG,EAAhB;AACA,IAAMC,WAAW,GAAGC,IAAI,CAACC,EAAL,GAAU,CAA9B;AACA,IAAMC,OAAO,GAAG,CAAhB;AACA,IAAMC,SAAS,GAAG,CAAlB;AAEA,IAAMC,SAAS,GAAGb,UAAU,CAAC,gBAAsBc,GAAtB,EAA8B;AAAA,MAA3BC,QAA2B,QAA3BA,QAA2B;AAAA,MAAjBC,KAAiB,QAAjBA,KAAiB;AACzD,MAAMC,GAAG,GAAGlB,MAAM,sBAAeK,IAAI,EAAnB,EAAN,CAA+Bc,OAA3C;AACA,MAAMC,UAAU,GAAGpB,MAAM,+BAAwBK,IAAI,EAA5B,EAAN,CAAwCc,OAA3D;;AAFyD,uBAGvBf,aAAa,CAACW,GAAD,CAHU;AAAA,MAGjDM,KAHiD,kBAGjDA,KAHiD;AAAA,MAG1CC,MAH0C,kBAG1CA,MAH0C;AAAA,MAGlCC,MAHkC,kBAGlCA,MAHkC;;AAKzD,MAAMC,CAAC,GAAGH,KAAK,GAAG,CAAlB;AACA,MAAMI,CAAC,GAAGH,MAAM,GAAG,CAAnB;;AAEA,WAASI,oBAAT,CAA8BF,CAA9B,EAAiCC,CAAjC,EAAoCE,MAApC,EAA4CC,MAA5C,EAAoD;AAClD,WAAO,CAACJ,CAAC,GAAGd,IAAI,CAACmB,GAAL,CAASD,MAAT,IAAmBD,MAAxB,EAAgCF,CAAC,GAAGf,IAAI,CAACoB,GAAL,CAASF,MAAT,IAAmBD,MAAvD,CAAP;AACD;;AAED,WAASI,SAAT,GAAqB;AACnB,QAAMC,UAAU,GAAG,CAACtB,IAAI,CAACC,EAAN,GAAW,CAA9B;AACA,QAAMsB,QAAQ,GAAGxB,WAAW,GAAGD,OAA/B;AACA,QAAM0B,CAAC,GAAGb,KAAK,GAAG,CAAlB;AACA,QAAIc,aAAa,GAAGT,oBAAoB,CAACF,CAAD,EAAIC,CAAJ,EAAOS,CAAP,EAAUF,UAAV,CAAxC;AACA,WAAO,IAAII,KAAJ,CAAU5B,OAAV,EAAmB6B,IAAnB,CAAwB,EAAxB,EAA4BC,GAA5B,CAAgC,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC/C,UAAMC,SAAS,GAAGf,oBAAoB,CAACF,CAAD,EAAIC,CAAJ,EAAOS,CAAP,EAAUF,UAAU,GAAG,CAACQ,CAAC,GAAG,CAAL,IAAUP,QAAjC,CAApB,CAA+DK,GAA/D,CAAmE,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACG,OAAF,CAAU,CAAV,CAAP;AAAA,OAAnE,CAAlB;AACA,UAAMC,CAAC,cAAOR,aAAa,CAACS,IAAd,CAAmB,GAAnB,CAAP,eAAmCV,CAAnC,eAAyCA,CAAzC,oBAAoDO,SAAS,CAACG,IAAV,CAAe,GAAf,CAApD,CAAP;AACAT,MAAAA,aAAa,GAAGM,SAAhB;AACA,aAAOE,CAAP;AACD,KALM,CAAP;AAMD;;AAED,WAASE,aAAT,GAAyB;AACvB,QAAMC,QAAQ,GAAG,OAAOtC,OAAO,GAAG,CAAjB,CAAjB;AACA,WAAO,IAAI4B,KAAJ,CAAU5B,OAAV,EAAmB6B,IAAnB,CAAwB9B,YAAY,CAAC,CAAD,CAApC,EAAyC+B,GAAzC,CAA6C,UAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUlC,QAAQ,CAACC,YAAY,CAAC,CAAD,CAAb,EAAkB,MAAMiC,CAAC,GAAGM,QAA5B,CAAlB;AAAA,KAA7C,CAAP;AACD;;AAED,WAASC,WAAT,GAAuB;AACrB,QAAMC,SAAS,GAAGtC,IAAI,CAACuC,GAAL,CAAS,CAAC5B,KAAK,GAAG,CAAR,GAAYR,SAAS,GAAG,CAAzB,IAA8BD,OAAvC,CAAlB;AACA,WAAO,IAAIwB,KAAJ,CAAUxB,OAAV,EAAmByB,IAAnB,CAAwB,CAAxB,EAA2BC,GAA3B,CAA+B,UAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUQ,SAAS,IAAIR,CAAC,GAAG,CAAR,CAAnB;AAAA,KAA/B,CAAP;AACD;;AAED,WAASU,mBAAT,GAA+B;AAC7B,QAAMjB,QAAQ,GAAGvB,IAAI,CAACC,EAAL,GAAU,CAA3B;AACA,QAAMuB,CAAC,GAAGb,KAAK,GAAG,CAAlB;AACA,WAAO,IAAIe,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,EAAlB,EAAsBC,GAAtB,CAA0B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACzC,UAAMR,UAAU,GAAGC,QAAQ,IAAIO,CAAC,GAAG,CAAR,CAA3B;AACA,UAAMW,QAAQ,GAAGnB,UAAU,GAAGtB,IAAI,CAACC,EAAnC;AACA,UAAMyC,UAAU,GAAG1B,oBAAoB,CAACF,CAAD,EAAIC,CAAJ,EAAOS,CAAP,EAAUF,UAAV,CAAvC;AACA,UAAMqB,QAAQ,GAAG3B,oBAAoB,CAACF,CAAD,EAAIC,CAAJ,EAAOS,CAAP,EAAUiB,QAAV,CAArC;AACA,uBAAUC,UAAU,CAACR,IAAX,CAAgB,GAAhB,CAAV,cAAkCS,QAAQ,CAACT,IAAT,CAAc,GAAd,CAAlC;AACD,KANM,CAAP;AAOD;;AAED,WAASU,QAAT,GAAoB;AAClB,QAAMrB,QAAQ,GAAGvB,IAAI,CAACC,EAAL,GAAU,CAA3B;AACA,QAAMuB,CAAC,GAAGb,KAAK,GAAG,CAAR,GAAY,CAAtB;AACA,WAAO,IAAIe,KAAJ,CAAU,CAAV,EAAaC,IAAb,CAAkB,EAAlB,EAAsBC,GAAtB,CAA0B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACzC,UAAMR,UAAU,GAAGC,QAAQ,IAAI,IAAIO,CAAJ,GAAQ,CAAZ,CAA3B;AACA,UAAMW,QAAQ,GAAGnB,UAAU,GAAGC,QAA9B;AACA,UAAMmB,UAAU,GAAG1B,oBAAoB,CAACF,CAAD,EAAIC,CAAJ,EAAOS,CAAP,EAAUF,UAAV,CAAvC;AACA,UAAMqB,QAAQ,GAAG3B,oBAAoB,CAACF,CAAD,EAAIC,CAAJ,EAAOS,CAAP,EAAUiB,QAAV,CAArC;AACA,wBAAWC,UAAU,CAACR,IAAX,CAAgB,GAAhB,CAAX,eAAoCpB,CAApC,eAA0CC,CAA1C,oBAAqD4B,QAAQ,CAACT,IAAT,CAAc,GAAd,CAArD;AACD,KANM,CAAP;AAOD;;AAED,WAASW,WAAT,GAAuB;AACrB,WAAO;AACLC,MAAAA,KAAK,EAAEzB,SAAS,EADX;AAEL0B,MAAAA,SAAS,EAAEZ,aAAa,EAFnB;AAGLa,MAAAA,OAAO,EAAEX,WAAW,EAHf;AAILY,MAAAA,eAAe,EAAET,mBAAmB,EAJ/B;AAKLU,MAAAA,IAAI,EAAEN,QAAQ;AALT,KAAP;AAOD;;AAnEwD,iBAqEIpD,OAAO,CAACqD,WAAD,EAAc,CAAClC,KAAD,EAAQC,MAAR,CAAd,CArEX;AAAA,MAqEjDkC,KArEiD,YAqEjDA,KArEiD;AAAA,MAqE1CC,SArE0C,YAqE1CA,SArE0C;AAAA,MAqE/BC,OArE+B,YAqE/BA,OArE+B;AAAA,MAqEtBC,eArEsB,YAqEtBA,eArEsB;AAAA,MAqELC,IArEK,YAqELA,IArEK;;AAuEzD,sBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAA+B,IAAA,KAAK,EAAE3C,KAAtC;AAA6C,IAAA,GAAG,EAAEM,MAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAEF,KAAZ;AAAmB,IAAA,MAAM,EAAEC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,EAAE,EAAEJ,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGsC,KAAK,CAAClB,GAAN,CAAU,UAACuB,CAAD,EAAIrB,CAAJ;AAAA,wBACT;AAAM,MAAA,MAAM,EAAEiB,SAAS,CAACjB,CAAD,CAAvB;AAA4B,MAAA,WAAW,EAAEhB,CAAzC;AAA4C,MAAA,IAAI,EAAC,aAAjD;AAA+D,MAAA,GAAG,EAAEgB,CAApE;AAAuE,MAAA,CAAC,EAAEqB,CAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADS;AAAA,GAAV,CADH,CADF,eAME;AAAgB,IAAA,EAAE,EAAEzC,UAApB;AAAgC,IAAA,EAAE,EAAC,KAAnC;AAAyC,IAAA,EAAE,EAAC,KAA5C;AAAkD,IAAA,CAAC,EAAC,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,MAAM,EAAC,IAAb;AAAkB,IAAA,SAAS,EAAC,aAA5B;AAA0C,IAAA,WAAW,EAAC,GAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAM,IAAA,MAAM,EAAC,MAAb;AAAoB,IAAA,SAAS,EAAEd,QAAQ,CAACC,YAAY,CAAC,CAAD,CAAb,EAAkB,EAAlB,CAAvC;AAA8D,IAAA,WAAW,EAAC,GAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CANF,CADF,EAYGmD,OAAO,CAACpB,GAAR,CAAY,UAACJ,CAAD,EAAIM,CAAJ;AAAA,wBACX;AAAQ,MAAA,GAAG,EAAEA,CAAb;AAAgB,MAAA,CAAC,EAAEN,CAAnB;AAAsB,MAAA,EAAE,EAAEV,CAA1B;AAA6B,MAAA,EAAE,EAAEC,CAAjC;AAAoC,MAAA,MAAM,EAAElB,YAAY,CAAC,CAAD,CAAxD;AAA6D,MAAA,WAAW,EAAC,KAAzE;AAA+E,MAAA,IAAI,EAAC,aAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADW;AAAA,GAAZ,CAZH,eAeE;AAAQ,IAAA,CAAC,EAAC,GAAV;AAAc,IAAA,EAAE,EAAEiB,CAAlB;AAAqB,IAAA,EAAE,EAAEC,CAAzB;AAA4B,IAAA,MAAM,EAAC,aAAnC;AAAiD,IAAA,IAAI,iBAAUL,UAAV,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAS,IAAA,aAAa,EAAC,GAAvB;AAA2B,IAAA,MAAM,cAAOI,CAAP,CAAjC;AAA6C,IAAA,GAAG,EAAC,IAAjD;AAAsD,IAAA,WAAW,EAAC,YAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAS,IAAA,aAAa,EAAC,SAAvB;AAAiC,IAAA,MAAM,EAAC,KAAxC;AAA8C,IAAA,GAAG,EAAC,IAAlD;AAAuD,IAAA,WAAW,EAAC,YAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAfF,eAmBE;AAAQ,IAAA,CAAC,EAAC,GAAV;AAAc,IAAA,EAAE,EAAEA,CAAlB;AAAqB,IAAA,EAAE,EAAEC,CAAzB;AAA4B,IAAA,IAAI,EAAElB,YAAY,CAAC,CAAD,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,eAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGoD,eAAe,CAACrB,GAAhB,CAAoB,UAACwB,CAAD,EAAItB,CAAJ;AAAA,wBACnB;AAAU,MAAA,GAAG,EAAEA,CAAf;AAAkB,MAAA,MAAM,EAAEsB,CAA1B;AAA6B,MAAA,MAAM,EAAEvD,YAAY,CAAC,CAAD,CAAjD;AAAsD,MAAA,WAAW,EAAC,KAAlE;AAAwE,MAAA,OAAO,EAAC,KAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADmB;AAAA,GAApB,CADH,CApBF,EA0BGqD,IAAI,CAACtB,GAAL,CAAS,UAACwB,CAAD,EAAItB,CAAJ;AAAA,wBACR;AAAM,MAAA,GAAG,EAAEA,CAAX;AAAc,MAAA,CAAC,EAAEsB,CAAjB;AAAoB,MAAA,MAAM,EAAEvD,YAAY,CAAC,CAAD,CAAxC;AAA6C,MAAA,WAAW,EAAC,GAAzD;AAA6D,MAAA,IAAI,EAAC,aAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADQ;AAAA,GAAT,CA1BH,eA8BE;AAAK,IAAA,SAAS,aAAMW,GAAN,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,aAAa,EAAC,WADhB;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,MAAM,eAAQM,CAAR,cAAaC,CAAb,mBAAuBD,CAAvB,cAA4BC,CAA5B,CAHR;AAIE,IAAA,GAAG,EAAC,IAJN;AAKE,IAAA,WAAW,EAAC,YALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CA9BF,CADF,eAyCE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqCT,QAArC,CAzCF,CADF;AA6CD,CApH2B,CAA5B;AAsHAF,SAAS,CAACiD,SAAV,GAAsB;AACpB/C,EAAAA,QAAQ,EAAEb,SAAS,CAAC6D,IADA;AAEpB/C,EAAAA,KAAK,EAAEd,SAAS,CAAC8D;AAFG,CAAtB;AAKA,eAAenD,SAAf","sourcesContent":["import React, { useRef, forwardRef, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { useAutoResize } from \"~common/hooks\";\nimport { uuid } from \"~utils\";\nimport { hexToRgb } from \"~utils\";\n\nconst defaultColor = [\"#2783ce\", \"#2cf7fe\"];\nconst segment = 30;\nconst sectorAngle = Math.PI / 3;\nconst ringNum = 3;\nconst ringWidth = 1;\n\nconst BorderBox = forwardRef(({ children, style }, ref) => {\n  const gId = useRef(`decoration-${uuid()}`).current;\n  const gradientId = useRef(`decoration-gradient-${uuid()}`).current;\n  const { width, height, domRef } = useAutoResize(ref);\n\n  const x = width / 2;\n  const y = height / 2;\n\n  function getCircleRadianPoint(x, y, radius, radian) {\n    return [x + Math.cos(radian) * radius, y + Math.sin(radian) * radius];\n  }\n\n  function calcPathD() {\n    const startAngle = -Math.PI / 2;\n    const angleGap = sectorAngle / segment;\n    const r = width / 4;\n    let lastEndPoints = getCircleRadianPoint(x, y, r, startAngle);\n    return new Array(segment).fill(\"\").map((_, i) => {\n      const endPoints = getCircleRadianPoint(x, y, r, startAngle - (i + 1) * angleGap).map((_) => _.toFixed(5));\n      const d = `M${lastEndPoints.join(\",\")} A${r}, ${r} 0 0 0 ${endPoints.join(\",\")}`;\n      lastEndPoints = endPoints;\n      return d;\n    });\n  }\n\n  function calcPathColor() {\n    const colorGap = 100 / (segment - 1);\n    return new Array(segment).fill(defaultColor[0]).map((_, i) => hexToRgb(defaultColor[0], 100 - i * colorGap));\n  }\n\n  function calcCircleR() {\n    const radiusGap = Math.abs((width / 2 - ringWidth / 2) / ringNum);\n    return new Array(ringNum).fill(0).map((_, i) => radiusGap * (i + 1));\n  }\n\n  function calcSplitLinePoints() {\n    const angleGap = Math.PI / 6;\n    const r = width / 2;\n    return new Array(6).fill(\"\").map((_, i) => {\n      const startAngle = angleGap * (i + 1);\n      const endAngle = startAngle + Math.PI;\n      const startPoint = getCircleRadianPoint(x, y, r, startAngle);\n      const endPoint = getCircleRadianPoint(x, y, r, endAngle);\n      return `${startPoint.join(\",\")} ${endPoint.join(\",\")}`;\n    });\n  }\n\n  function calcArcD() {\n    const angleGap = Math.PI / 6;\n    const r = width / 2 - 1;\n    return new Array(4).fill(\"\").map((_, i) => {\n      const startAngle = angleGap * (3 * i + 1);\n      const endAngle = startAngle + angleGap;\n      const startPoint = getCircleRadianPoint(x, y, r, startAngle);\n      const endPoint = getCircleRadianPoint(x, y, r, endAngle);\n      return `M${startPoint.join(\",\")} A${x}, ${y} 0 0 1 ${endPoint.join(\",\")}`;\n    });\n  }\n\n  function calcSVGData() {\n    return {\n      pathD: calcPathD(),\n      pathColor: calcPathColor(),\n      circleR: calcCircleR(),\n      splitLinePoints: calcSplitLinePoints(),\n      arcD: calcArcD()\n    };\n  }\n\n  const { pathD, pathColor, circleR, splitLinePoints, arcD } = useMemo(calcSVGData, [width, height]);\n\n  return (\n    <div className=\"gc-containers\" style={style} ref={domRef}>\n      <svg width={width} height={height}>\n        <defs>\n          <g id={gId}>\n            {pathD.map((o, i) => (\n              <path stroke={pathColor[i]} strokeWidth={x} fill=\"transparent\" key={i} d={o} />\n            ))}\n          </g>\n          <radialGradient id={gradientId} cx=\"50%\" cy=\"50%\" r=\"50%\">\n            <stop offset=\"0%\" stopColor=\"transparent\" stopOpacity=\"1\"></stop>\n            <stop offset=\"100%\" stopColor={hexToRgb(defaultColor[1], 30)} stopOpacity=\"1\"></stop>\n          </radialGradient>\n        </defs>\n        {circleR.map((r, i) => (\n          <circle key={i} r={r} cx={x} cy={y} stroke={defaultColor[1]} strokeWidth=\"0.5\" fill=\"transparent\" />\n        ))}\n        <circle r=\"1\" cx={x} cy={y} stroke=\"transparent\" fill={`url(#${gradientId})`}>\n          <animate attributeName=\"r\" values={`1;${x}`} dur=\"2s\" repeatCount=\"indefinite\"></animate>\n          <animate attributeName=\"opacity\" values=\"1;0\" dur=\"2s\" repeatCount=\"indefinite\"></animate>\n        </circle>\n        <circle r=\"2\" cx={x} cy={y} fill={defaultColor[1]}></circle>\n        <g>\n          {splitLinePoints.map((p, i) => (\n            <polyline key={i} points={p} stroke={defaultColor[1]} strokeWidth=\"0.5\" opacity=\"0.5\" />\n          ))}\n        </g>\n\n        {arcD.map((p, i) => (\n          <path key={i} d={p} stroke={defaultColor[1]} strokeWidth=\"2\" fill=\"transparent\" />\n        ))}\n\n        <use xlinkHref={`#${gId}`}>\n          <animateTransform\n            attributeName=\"transform\"\n            type=\"rotate\"\n            values={`0, ${x} ${y};360, ${x} ${y}`}\n            dur=\"3s\"\n            repeatCount=\"indefinite\"\n          ></animateTransform>\n        </use>\n      </svg>\n      <div className=\"decoration-content\">{children}</div>\n    </div>\n  );\n});\n\nBorderBox.propTypes = {\n  children: PropTypes.node,\n  style: PropTypes.object\n};\n\nexport default BorderBox;\n"]},"metadata":{},"sourceType":"module"}