{"ast":null,"code":"import _classCallCheck from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/components/sketch-ruler/ruler-context-menu.js\";\n\n/* eslint-disable no-return-assign */\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createPortal } from \"react-dom\";\nimport { StyleMenu } from \"./styles\";\nvar SELECT_SVG = /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"10\",\n  height: \"10\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 5.066c0 .211.07.39.212.538L3.346 7.78A.699.699 0 0 0 3.872 8a.69.69 0 0 0 .517-.221l4.39-4.49A.731.731 0 0 0 9 2.753a.717.717 0 0 0-.22-.532A.714.714 0 0 0 8.255 2a.714.714 0 0 0-.524.221l-3.86 3.955L2.26 4.528a.714.714 0 0 0-.524-.221.714.714 0 0 0-.524.221.749.749 0 0 0-.212.538z\",\n  fill: \"#415058\",\n  fillRule: \"evenodd\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 5\n  }\n}));\n\nvar RulerContextMenu = /*#__PURE__*/function (_PureComponent) {\n  _inherits(RulerContextMenu, _PureComponent);\n\n  var _super = _createSuper(RulerContextMenu);\n\n  function RulerContextMenu(props) {\n    var _this;\n\n    _classCallCheck(this, RulerContextMenu);\n\n    _this = _super.call(this, props);\n\n    _this.closeMenu = function () {\n      var oncloseMenu = _this.props.oncloseMenu;\n      oncloseMenu();\n    };\n\n    _this.closeMenuMouse = function (e) {\n      if (e.button !== 2) return;\n\n      _this.closeMenu();\n    };\n\n    _this.onhandleShowReferLine = function () {\n      var handleShowReferLine = _this.props.handleShowReferLine;\n      handleShowReferLine();\n    };\n\n    _this.onhandleShowSpecificRuler = function () {\n      var _this$props = _this.props,\n          horLineArr = _this$props.horLineArr,\n          verLineArr = _this$props.verLineArr,\n          handleLine = _this$props.handleLine,\n          vertical = _this$props.vertical;\n      var newLines = vertical ? {\n        h: horLineArr,\n        v: []\n      } : {\n        h: [],\n        v: verLineArr\n      };\n      handleLine(newLines);\n\n      _this.closeMenu();\n    };\n\n    _this.el = document.createElement(\"div\");\n    return _this;\n  }\n\n  _createClass(RulerContextMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.body.appendChild(this.el);\n      document.addEventListener(\"click\", this.closeMenu);\n      document.addEventListener(\"mousedown\", this.closeMenuMouse);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"mousedown\", this.closeMenuMouse);\n      document.removeEventListener(\"click\", this.closeMenu);\n      document.body.removeChild(this.el);\n    } // click事件只响应左键，menu里的每部分的点击事件使用的是click，\n    // 所以mousedown只能响应右键，否则内部点击事件失效\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          isShowReferLine = _this$props2.isShowReferLine,\n          vertical = _this$props2.vertical,\n          verLineArr = _this$props2.verLineArr,\n          horLineArr = _this$props2.horLineArr,\n          lang = _this$props2.lang,\n          menuConfigs = _this$props2.menuConfigs;\n      var _this$props$menuPosit = this.props.menuPosition,\n          left = _this$props$menuPosit.left,\n          top = _this$props$menuPosit.top;\n      var isDisabled = vertical ? !verLineArr.length : !horLineArr.length;\n      return createPortal( /*#__PURE__*/React.createElement(StyleMenu, {\n        style: {\n          left: left,\n          top: top\n        },\n        showReferLine: isShowReferLine,\n        lang: lang,\n        menuConfigs: menuConfigs,\n        id: \"contextMenu\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"menu-content\",\n        onClick: this.onhandleShowReferLine,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }, \"\\u663E\\u793A\\u53C2\\u8003\\u7EBF\", isShowReferLine && SELECT_SVG), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"divider\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"menu-content\".concat(isDisabled ? \" disabled\" : \"\"),\n        onClick: this.onhandleShowSpecificRuler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      }, \"\\u5220\\u9664\\u6240\\u6709\", vertical ? \"横向\" : \"纵向\", \"\\u53C2\\u8003\\u7EBF\")), this.el);\n    }\n  }]);\n\n  return RulerContextMenu;\n}(PureComponent);\n\nexport { RulerContextMenu as default };\nRulerContextMenu.propTypes = {\n  vertical: PropTypes.bool,\n  menuPosition: PropTypes.object,\n  handleShowRuler: PropTypes.func,\n  isShowReferLine: PropTypes.bool,\n  handleShowReferLine: PropTypes.func,\n  horLineArr: PropTypes.array,\n  verLineArr: PropTypes.array,\n  handleLine: PropTypes.func,\n  oncloseMenu: PropTypes.func,\n  lang: PropTypes.string,\n  menuConfigs: PropTypes.object\n};","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/components/sketch-ruler/ruler-context-menu.js"],"names":["React","PureComponent","PropTypes","createPortal","StyleMenu","SELECT_SVG","RulerContextMenu","props","closeMenu","oncloseMenu","closeMenuMouse","e","button","onhandleShowReferLine","handleShowReferLine","onhandleShowSpecificRuler","horLineArr","verLineArr","handleLine","vertical","newLines","h","v","el","document","createElement","body","appendChild","addEventListener","removeEventListener","removeChild","isShowReferLine","lang","menuConfigs","menuPosition","left","top","isDisabled","length","propTypes","bool","object","handleShowRuler","func","array","string"],"mappings":"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","sourcesContent":["/* eslint-disable no-return-assign */\nimport React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createPortal } from \"react-dom\";\nimport { StyleMenu } from \"./styles\";\n\nconst SELECT_SVG = (\n  <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M1 5.066c0 .211.07.39.212.538L3.346 7.78A.699.699 0 0 0 3.872 8a.69.69 0 0 0 .517-.221l4.39-4.49A.731.731 0 0 0 9 2.753a.717.717 0 0 0-.22-.532A.714.714 0 0 0 8.255 2a.714.714 0 0 0-.524.221l-3.86 3.955L2.26 4.528a.714.714 0 0 0-.524-.221.714.714 0 0 0-.524.221.749.749 0 0 0-.212.538z\"\n      fill=\"#415058\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport default class RulerContextMenu extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.el = document.createElement(\"div\");\n  }\n  componentDidMount() {\n    document.body.appendChild(this.el);\n    document.addEventListener(\"click\", this.closeMenu);\n    document.addEventListener(\"mousedown\", this.closeMenuMouse);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.closeMenuMouse);\n    document.removeEventListener(\"click\", this.closeMenu);\n    document.body.removeChild(this.el);\n  }\n  // click事件只响应左键，menu里的每部分的点击事件使用的是click，\n  // 所以mousedown只能响应右键，否则内部点击事件失效\n  closeMenu = () => {\n    const { oncloseMenu } = this.props;\n    oncloseMenu();\n  };\n  closeMenuMouse = (e) => {\n    if (e.button !== 2) return;\n    this.closeMenu();\n  };\n  // 显示/影藏 参考线\n  onhandleShowReferLine = () => {\n    const { handleShowReferLine } = this.props;\n    handleShowReferLine();\n  };\n  // 删除横向/纵向参考线\n  onhandleShowSpecificRuler = () => {\n    const { horLineArr, verLineArr, handleLine, vertical } = this.props;\n    const newLines = vertical ? { h: horLineArr, v: [] } : { h: [], v: verLineArr };\n    handleLine(newLines);\n    this.closeMenu();\n  };\n  render() {\n    const { isShowReferLine, vertical, verLineArr, horLineArr, lang, menuConfigs } = this.props;\n    const { left, top } = this.props.menuPosition;\n    const isDisabled = vertical ? !verLineArr.length : !horLineArr.length;\n\n    return createPortal(\n      <StyleMenu\n        style={{ left: left, top: top }}\n        showReferLine={isShowReferLine}\n        lang={lang}\n        menuConfigs={menuConfigs}\n        id=\"contextMenu\"\n      >\n        <a className=\"menu-content\" onClick={this.onhandleShowReferLine}>\n          显示参考线\n          {isShowReferLine && SELECT_SVG}\n        </a>\n        <div className=\"divider\" />\n        <a className={`menu-content${isDisabled ? \" disabled\" : \"\"}`} onClick={this.onhandleShowSpecificRuler}>\n          删除所有\n          {vertical ? \"横向\" : \"纵向\"}\n          参考线\n        </a>\n      </StyleMenu>,\n      this.el\n    );\n  }\n}\n\nRulerContextMenu.propTypes = {\n  vertical: PropTypes.bool,\n  menuPosition: PropTypes.object,\n  handleShowRuler: PropTypes.func,\n  isShowReferLine: PropTypes.bool,\n  handleShowReferLine: PropTypes.func,\n  horLineArr: PropTypes.array,\n  verLineArr: PropTypes.array,\n  handleLine: PropTypes.func,\n  oncloseMenu: PropTypes.func,\n  lang: PropTypes.string,\n  menuConfigs: PropTypes.object\n};\n"]},"metadata":{},"sourceType":"module"}