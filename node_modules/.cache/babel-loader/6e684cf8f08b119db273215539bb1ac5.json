{"ast":null,"code":"import \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/tree/style\";\nimport _Tree from \"antd/es/tree\";\nimport _slicedToArray from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/collapse/style\";\nimport _Collapse from \"antd/es/collapse\";\nimport \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\n\nvar _jsxFileName = \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/src/pages/fullscreen/src/aside.jsx\",\n    _this = this;\n\nimport React, { Fragment, useRef, useState, useEffect } from \"react\";\nimport { DragSource } from \"react-dnd\";\nimport { IconFont, Scrollbar, SplitPanel } from \"~components\";\nimport { connect } from \"react-redux\";\nimport { useTools, useStore } from \"~common/hooks\";\nimport collections from \"../data\";\nimport { DRAGGABLE_COMPONENT } from \"~common/constants\";\n/**\n * 配置项汇总\n */\n\nvar collection = collections.collection;\nvar VERSION = window.appConfig.VERSION;\n\nfunction FieldCard(props) {\n  var _props$node = props.node,\n      node = _props$node === void 0 ? {} : _props$node,\n      connectDragPreview = props.connectDragPreview,\n      connectDragSource = props.connectDragSource;\n  return connectDragPreview(connectDragSource( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"silder-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    hoverable: true,\n    cover: node.icon ? /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"AutoComplete\",\n      src: \"./static/component/\".concat(node.icon, \".png\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 30\n      }\n    }) : null,\n    bodyStyle: {\n      padding: \"10px 5px\",\n      fontSize: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Card.Meta, {\n    description: node.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 11\n    }\n  })))));\n}\n\nvar FieldProvider = DragSource(DRAGGABLE_COMPONENT, {\n  /**\n   * 开始拖拽时触发当前函数\n   */\n  beginDrag: function beginDrag(props) {\n    return {\n      component: props.node\n    };\n  }\n}, function (connect, monitor) {\n  return {\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging()\n  };\n})(FieldCard);\n/**\n * 分类组件栏\n * @param {*} list 组件列表\n */\n\nvar SubEnumField = function SubEnumField(_ref) {\n  var list = _ref.list;\n  return /*#__PURE__*/React.createElement(_Row, {\n    gutter: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, list.map(function (ele, idx) {\n    return /*#__PURE__*/React.createElement(_Col, {\n      span: 12,\n      key: \"\".concat(idx),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FieldProvider, {\n      node: ele,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }));\n  }));\n};\n/**\n * 枚举组件\n * @param {*} value 搜索值\n */\n\n\nvar EnumFields = function EnumFields(_ref2) {\n  var value = _ref2.value;\n  var componentTools = useRef([{\n    key: \"bar\",\n    name: \"柱状图\",\n    icon: \"BarChartOutlined\",\n    list: collections.bar\n  }, {\n    key: \"line\",\n    name: \"线形图\",\n    icon: \"LineChartOutlined\",\n    list: collections.line\n  }, {\n    key: \"pie\",\n    name: \"饼状图\",\n    icon: \"PieChartOutlined\",\n    list: collections.pie\n  }, {\n    key: \"map\",\n    name: \"地图\",\n    icon: \"HeatMapOutlined\",\n    list: collections.map\n  }, {\n    key: \"other\",\n    name: \"其他图表\",\n    icon: \"FundOutlined\",\n    list: collections.other\n  }, {\n    key: \"datav\",\n    name: \"辅助组件\",\n    icon: \"WindowsOutlined\",\n    list: collections.datav\n  }]).current;\n  var displayField = collection.filter(function (ele) {\n    return ele.name === value;\n  });\n  return displayField && displayField.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"silder-tab\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Collapse, {\n    defaultActiveKey: \"bar\",\n    expandIconPosition: \"right\",\n    accordion: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, componentTools.map(function (item) {\n    return /*#__PURE__*/React.createElement(_Collapse.Panel, {\n      header: /*#__PURE__*/React.createElement(Fragment, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IconFont, {\n        antd: true,\n        style: {\n          marginRight: 5\n        },\n        type: item.icon,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }\n      }), item.name),\n      key: item.key,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(SubEnumField, {\n      list: item.list,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }));\n  }))) : /*#__PURE__*/React.createElement(SubEnumField, {\n    list: displayField,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  });\n}; // 组件市场汇总\n\n\nvar FieldMarkets = function FieldMarkets(_ref3) {\n  var activeKey = _ref3.activeKey,\n      dispatch = _ref3.dispatch;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      cname = _useState2[0],\n      setcname = _useState2[1];\n\n  var _useState3 = useState([{\n    title: \"图层\",\n    key: \"-\",\n    children: []\n  }]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      layer = _useState4[0],\n      setLayer = _useState4[1];\n\n  var _useTools = useTools(),\n      state = _useTools.state,\n      setState = _useTools.setState;\n\n  var _useStore = useStore(),\n      view = _useStore.view;\n\n  useEffect(function () {\n    var treeList = state.components.map(function (m) {\n      return {\n        key: m.uniqueId,\n        title: m.data.title || \"未命名\",\n        isLeaf: true\n      };\n    }); // 最终图层面板\n\n    setLayer([{\n      title: \"图层\",\n      key: \"-\",\n      children: treeList\n    }]);\n  }, [activeKey, state.components]);\n\n  var onChange = function onChange(value) {\n    setcname(value);\n  };\n\n  var onSelect = function onSelect(keys) {\n    setState({\n      tabsKey: \"base\"\n    });\n    dispatch({\n      type: \"component/activeKey\",\n      data: keys.join(\"\")\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"aside\", {\n    className: view.layerCollapsed ? \"gc-design__silder is-show\" : \"gc-design__silder\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SplitPanel, {\n    mode: \"horizontal\",\n    minSize: 400,\n    maxSize: 600,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"silder-tree\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Scrollbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    title: \"\\u5927\\u5C4F\\u8BBE\\u8BA1\\u5668\",\n    bordered: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Tree.DirectoryTree, {\n    defaultExpandAll: true,\n    expandAction: false,\n    selectedKeys: [activeKey],\n    onSelect: onSelect,\n    treeData: layer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"silder-components\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Scrollbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(_Card, {\n    title: \"\\u7EC4\\u4EF6 \\uFF08\\u5F53\\u524D\\u7248\\u672C\\uFF1A\".concat(VERSION, \"\\uFF09\"),\n    bordered: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Select, {\n    className: \"silder-select\",\n    showSearch: true,\n    allowClear: true,\n    placeholder: \"\\u67E5\\u627E\\u5BF9\\u5E94\\u7EC4\\u4EF6\",\n    optionFilterProp: \"children\",\n    onChange: onChange,\n    filterOption: function filterOption(input, option) {\n      return option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, collection.map(function (item) {\n    return /*#__PURE__*/React.createElement(_Select.Option, {\n      value: item.name,\n      key: item.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    }, item.name);\n  })), /*#__PURE__*/React.createElement(EnumFields, {\n    value: cname,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default connect(function (state) {\n  return {\n    activeKey: state.component.activeKey\n  };\n})(FieldMarkets);","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/图元/react-visual-data/src/pages/fullscreen/src/aside.jsx"],"names":["React","Fragment","useRef","useState","useEffect","DragSource","IconFont","Scrollbar","SplitPanel","connect","useTools","useStore","collections","DRAGGABLE_COMPONENT","collection","VERSION","window","appConfig","FieldCard","props","node","connectDragPreview","connectDragSource","icon","padding","fontSize","name","FieldProvider","beginDrag","component","monitor","dragSource","dragPreview","isDragging","SubEnumField","list","map","ele","idx","EnumFields","value","componentTools","key","bar","line","pie","other","datav","current","displayField","filter","length","item","marginRight","FieldMarkets","activeKey","dispatch","cname","setcname","title","children","layer","setLayer","state","setState","view","treeList","components","m","uniqueId","data","isLeaf","onChange","onSelect","keys","tabsKey","type","join","layerCollapsed","input","option","toLowerCase","indexOf"],"mappings":"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","sourcesContent":["import React, { Fragment, useRef, useState, useEffect } from \"react\";\nimport { Collapse, Tree, Select, Card, Col, Row } from \"antd\";\nimport { DragSource } from \"react-dnd\";\nimport { IconFont, Scrollbar, SplitPanel } from \"~components\";\nimport { connect } from \"react-redux\";\nimport { useTools, useStore } from \"~common/hooks\";\nimport collections from \"../data\";\nimport { DRAGGABLE_COMPONENT } from \"~common/constants\";\n\n/**\n * 配置项汇总\n */\nconst { collection } = collections;\nconst { VERSION } = window.appConfig;\n\nfunction FieldCard(props) {\n  const { node = {}, connectDragPreview, connectDragSource } = props;\n\n  return connectDragPreview(\n    connectDragSource(\n      <div className=\"silder-item\">\n        <Card\n          hoverable\n          cover={node.icon ? <img alt=\"AutoComplete\" src={`./static/component/${node.icon}.png`} /> : null}\n          bodyStyle={{\n            padding: \"10px 5px\",\n            fontSize: 12\n          }}\n        >\n          <Card.Meta description={node.name} />\n        </Card>\n      </div>\n    )\n  );\n}\n\nconst FieldProvider = DragSource(\n  DRAGGABLE_COMPONENT,\n  {\n    /**\n     * 开始拖拽时触发当前函数\n     */\n    beginDrag: (props) => ({\n      component: props.node\n    })\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging()\n  })\n)(FieldCard);\n\n/**\n * 分类组件栏\n * @param {*} list 组件列表\n */\nconst SubEnumField = ({ list }) => {\n  return (\n    <Row gutter={10}>\n      {list.map((ele, idx) => {\n        return (\n          <Col span={12} key={`${idx}`}>\n            <FieldProvider node={ele} />\n          </Col>\n        );\n      })}\n    </Row>\n  );\n};\n\n/**\n * 枚举组件\n * @param {*} value 搜索值\n */\nconst EnumFields = ({ value }) => {\n  const componentTools = useRef([\n    {\n      key: \"bar\",\n      name: \"柱状图\",\n      icon: \"BarChartOutlined\",\n      list: collections.bar\n    },\n    {\n      key: \"line\",\n      name: \"线形图\",\n      icon: \"LineChartOutlined\",\n      list: collections.line\n    },\n    {\n      key: \"pie\",\n      name: \"饼状图\",\n      icon: \"PieChartOutlined\",\n      list: collections.pie\n    },\n    {\n      key: \"map\",\n      name: \"地图\",\n      icon: \"HeatMapOutlined\",\n      list: collections.map\n    },\n    {\n      key: \"other\",\n      name: \"其他图表\",\n      icon: \"FundOutlined\",\n      list: collections.other\n    },\n    {\n      key: \"datav\",\n      name: \"辅助组件\",\n      icon: \"WindowsOutlined\",\n      list: collections.datav\n    }\n  ]).current;\n  const displayField = collection.filter((ele) => ele.name === value);\n\n  return displayField && displayField.length === 0 ? (\n    <div className=\"silder-tab\">\n      <Collapse defaultActiveKey=\"bar\" expandIconPosition=\"right\" accordion>\n        {componentTools.map((item) => (\n          <Collapse.Panel\n            header={\n              <Fragment>\n                <IconFont antd={true} style={{ marginRight: 5 }} type={item.icon} />\n                {item.name}\n              </Fragment>\n            }\n            key={item.key}\n          >\n            <SubEnumField list={item.list} />\n          </Collapse.Panel>\n        ))}\n      </Collapse>\n    </div>\n  ) : (\n    <SubEnumField list={displayField} />\n  );\n};\n\n// 组件市场汇总\nconst FieldMarkets = ({ activeKey, dispatch }) => {\n  const [cname, setcname] = useState(\"\");\n  const [layer, setLayer] = useState([\n    {\n      title: \"图层\",\n      key: \"-\",\n      children: []\n    }\n  ]);\n  const { state, setState } = useTools();\n  const { view } = useStore();\n\n  useEffect(() => {\n    let treeList = state.components.map((m) => {\n      return {\n        key: m.uniqueId,\n        title: m.data.title || \"未命名\",\n        isLeaf: true\n      };\n    });\n    // 最终图层面板\n    setLayer([\n      {\n        title: \"图层\",\n        key: \"-\",\n        children: treeList\n      }\n    ]);\n  }, [activeKey, state.components]);\n\n  const onChange = (value) => {\n    setcname(value);\n  };\n\n  const onSelect = (keys) => {\n    setState({ tabsKey: \"base\" });\n    dispatch({ type: \"component/activeKey\", data: keys.join(\"\") });\n  };\n\n  return (\n    <aside className={view.layerCollapsed ? \"gc-design__silder is-show\" : \"gc-design__silder\"}>\n      <SplitPanel mode=\"horizontal\" minSize={400} maxSize={600}>\n        <div className=\"silder-tree\">\n          <Scrollbar>\n            <Card title=\"大屏设计器\" bordered={false}>\n              <Tree.DirectoryTree\n                defaultExpandAll\n                expandAction={false}\n                selectedKeys={[activeKey]}\n                onSelect={onSelect}\n                treeData={layer}\n              />\n            </Card>\n          </Scrollbar>\n        </div>\n        <div className=\"silder-components\">\n          <Scrollbar>\n            <Card title={`组件 （当前版本：${VERSION}）`} bordered={false}>\n              <Select\n                className=\"silder-select\"\n                showSearch={true}\n                allowClear={true}\n                placeholder=\"查找对应组件\"\n                optionFilterProp=\"children\"\n                onChange={onChange}\n                filterOption={(input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n              >\n                {collection.map((item) => {\n                  return (\n                    <Select.Option value={item.name} key={item.name}>\n                      {item.name}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n              <EnumFields value={cname} />\n            </Card>\n          </Scrollbar>\n        </div>\n      </SplitPanel>\n    </aside>\n  );\n};\n\nexport default connect((state) => ({\n  activeKey: state.component.activeKey\n}))(FieldMarkets);\n"]},"metadata":{},"sourceType":"module"}