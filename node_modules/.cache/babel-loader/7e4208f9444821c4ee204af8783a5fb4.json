{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/empty/style\";\nimport _Empty from \"antd/es/empty\";\nimport _slicedToArray from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/src/materials/tabs/index.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nvar slideTimer = null;\n\nvar VTabs = function VTabs(_ref) {\n  var uniqueId = _ref.uniqueId,\n      options = _ref.options,\n      dispatch = _ref.dispatch;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  var btnMargin = options.btnMargin,\n      tabToChart = options.tabToChart,\n      btnType = options.btnType,\n      openSlide = options.openSlide,\n      slideInterval = options.slideInterval,\n      defaultColor = options.defaultColor,\n      defaultBgColor = options.defaultBgColor,\n      activeColor = options.activeColor,\n      activeBgColor = options.activeBgColor,\n      fontSize = options.fontSize,\n      defaultTab = options.defaultTab;\n  useEffect(function () {\n    setCurrent(defaultTab);\n    defaultTab && onClickHandle(defaultTab);\n  }, [defaultTab]);\n  useEffect(function () {\n    return function () {\n      dispatch({\n        type: \"tab/dependencies\",\n        data: []\n      });\n      dispatch({\n        type: \"tab/component\",\n        data: []\n      });\n    };\n  }, [uniqueId]);\n  useEffect(function () {\n    openSlide && slide();\n  }, [current, slideInterval, openSlide, tabToChart]); // 轮播循环处理\n\n  var slide = function slide() {\n    clearInterval(slideTimer);\n\n    var _tabToChart = (tabToChart || []).map(function (t) {\n      return t.id;\n    });\n\n    _tabToChart.length && (slideTimer = setInterval(function () {\n      var t = _tabToChart.indexOf(current || _tabToChart[0]) || 0,\n          _index = (t + 1) % _tabToChart.length;\n\n      onClickHandle(_tabToChart[_index]);\n    }, slideInterval || 2e3));\n  };\n\n  var onClickHandle = function onClickHandle(rowId) {\n    if (rowId === current) return;\n    setCurrent(rowId);\n    var _mapping = tabToChart.find(function (e) {\n      return e.id === rowId;\n    }).mapping;\n    var _components = [];\n    _components.push({\n      id: rowId,\n      mapping: _mapping\n    }) && dispatch({\n      type: \"tab/dependencies\",\n      data: _components\n    });\n  };\n\n  if (tabToChart.length === 0) {\n    return /*#__PURE__*/React.createElement(_Empty, {\n      image: _Empty.PRESENTED_IMAGE_SIMPLE,\n      description: \"\\u8BF7\\u914D\\u7F6E\\u8981\\u5173\\u8054\\u7684\\u56FE\\u8868\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (btnType === \"disperse\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gc-flex\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, tabToChart.map(function (m, n) {\n      return /*#__PURE__*/React.createElement(_Button, {\n        key: n,\n        style: {\n          height: \"100%\",\n          shadowBulr: 4,\n          margin: \"0 \".concat(btnMargin / 2, \"px\"),\n          padding: \"10px 20px\",\n          fontSize: fontSize,\n          color: current === m.id ? activeColor || \"#ffffff\" : defaultColor,\n          backgroundColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor,\n          borderColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor\n        },\n        size: \"large\",\n        onClick: function onClick() {\n          return onClickHandle(m.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, m.name || \"未命名\");\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(_Button.Group, {\n    style: {\n      shadowBulr: 4\n    },\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, tabToChart.map(function (m, n) {\n    return /*#__PURE__*/React.createElement(_Button, {\n      key: n,\n      style: {\n        height: \"100%\",\n        padding: \"10px 20px\",\n        fontSize: fontSize,\n        color: current === m.id ? activeColor || \"#ffffff\" : defaultColor,\n        backgroundColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor,\n        borderColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor\n      },\n      onClick: function onClick() {\n        return onClickHandle(m.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, m.name || \"未命名\");\n  })));\n};\n\nexport default connect(function (state) {\n  return {\n    tabDependencies: state.tab.dependencies\n  };\n})(VTabs);","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/图元/react-visual-data/src/materials/tabs/index.js"],"names":["React","useState","useEffect","connect","slideTimer","VTabs","uniqueId","options","dispatch","current","setCurrent","btnMargin","tabToChart","btnType","openSlide","slideInterval","defaultColor","defaultBgColor","activeColor","activeBgColor","fontSize","defaultTab","onClickHandle","type","data","slide","clearInterval","_tabToChart","map","t","id","length","setInterval","indexOf","_index","rowId","_mapping","find","e","mapping","_components","push","PRESENTED_IMAGE_SIMPLE","m","n","height","shadowBulr","margin","padding","color","backgroundColor","borderColor","name","state","tabDependencies","tab","dependencies"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, Empty } from \"antd\";\nimport { connect } from \"react-redux\";\n\nlet slideTimer = null;\n\nconst VTabs = ({ uniqueId, options, dispatch }) => {\n  const [current, setCurrent] = useState(\"\");\n  let {\n    btnMargin,\n    tabToChart,\n    btnType,\n    openSlide,\n    slideInterval,\n    defaultColor,\n    defaultBgColor,\n    activeColor,\n    activeBgColor,\n    fontSize,\n    defaultTab\n  } = options;\n\n  useEffect(() => {\n    setCurrent(defaultTab);\n    defaultTab && onClickHandle(defaultTab);\n  }, [defaultTab]);\n\n  useEffect(() => {\n    return () => {\n      dispatch({ type: \"tab/dependencies\", data: [] });\n      dispatch({ type: \"tab/component\", data: [] });\n    };\n  }, [uniqueId]);\n\n  useEffect(() => {\n    openSlide && slide();\n  }, [current, slideInterval, openSlide, tabToChart]);\n\n  // 轮播循环处理\n  const slide = () => {\n    clearInterval(slideTimer);\n\n    let _tabToChart = (tabToChart || []).map((t) => t.id);\n    _tabToChart.length &&\n      (slideTimer = setInterval(() => {\n        let t = _tabToChart.indexOf(current || _tabToChart[0]) || 0,\n          _index = (t + 1) % _tabToChart.length;\n\n        onClickHandle(_tabToChart[_index]);\n      }, slideInterval || 2e3));\n  };\n\n  const onClickHandle = (rowId) => {\n    if (rowId === current) return;\n    setCurrent(rowId);\n\n    let _mapping = tabToChart.find((e) => e.id === rowId).mapping;\n    let _components = [];\n\n    _components.push({\n      id: rowId,\n      mapping: _mapping\n    }) && dispatch({ type: \"tab/dependencies\", data: _components });\n  };\n\n  if (tabToChart.length === 0) {\n    return <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"请配置要关联的图表\" />;\n  }\n\n  if (btnType === \"disperse\") {\n    return (\n      <div className=\"gc-flex\">\n        {tabToChart.map((m, n) => {\n          return (\n            <Button\n              key={n}\n              style={{\n                height: \"100%\",\n                shadowBulr: 4,\n                margin: `0 ${btnMargin / 2}px`,\n                padding: \"10px 20px\",\n                fontSize: fontSize,\n                color: current === m.id ? activeColor || \"#ffffff\" : defaultColor,\n                backgroundColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor,\n                borderColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor\n              }}\n              size=\"large\"\n              onClick={() => onClickHandle(m.id)}\n            >\n              {m.name || \"未命名\"}\n            </Button>\n          );\n        })}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"gc-flex\">\n      <Button.Group\n        style={{\n          shadowBulr: 4\n        }}\n        size=\"large\"\n      >\n        {tabToChart.map((m, n) => {\n          return (\n            <Button\n              key={n}\n              style={{\n                height: \"100%\",\n                padding: \"10px 20px\",\n                fontSize: fontSize,\n                color: current === m.id ? activeColor || \"#ffffff\" : defaultColor,\n                backgroundColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor,\n                borderColor: current === m.id ? activeBgColor || \"#40a9f\" : defaultBgColor\n              }}\n              onClick={() => onClickHandle(m.id)}\n            >\n              {m.name || \"未命名\"}\n            </Button>\n          );\n        })}\n      </Button.Group>\n    </div>\n  );\n};\n\nexport default connect((state) => ({\n  tabDependencies: state.tab.dependencies\n}))(VTabs);\n"]},"metadata":{},"sourceType":"module"}