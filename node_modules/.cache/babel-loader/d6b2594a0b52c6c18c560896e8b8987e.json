{"ast":null,"code":"import _toConsumableArray from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/materials/decoration/src/decoration3.js\";\n\nimport React, { useMemo, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAutoResize } from \"~common/hooks\";\nvar defaultColor = [\"#7acaec\", \"transparent\"];\nvar pointSideLength = 7;\nvar svgWH = [300, 35];\nvar rowNum = 2;\nvar rowPoints = 25;\nvar halfPointSideLength = pointSideLength / 2;\n\nfunction getPoints() {\n  var w = svgWH[0],\n      h = svgWH[1];\n  var horizontalGap = w / (rowPoints + 1);\n  var verticalGap = h / (rowNum + 1);\n  var points = new Array(rowNum).fill(0).map(function (foo, i) {\n    return new Array(rowPoints).fill(0).map(function (foo, j) {\n      return [horizontalGap * (j + 1), verticalGap * (i + 1)];\n    });\n  });\n  return points.reduce(function (all, item) {\n    return [].concat(_toConsumableArray(all), _toConsumableArray(item));\n  }, []);\n}\n\nvar Decoration = forwardRef(function (_ref, ref) {\n  var style = _ref.style;\n\n  var _useAutoResize = useAutoResize(ref),\n      width = _useAutoResize.width,\n      height = _useAutoResize.height,\n      domRef = _useAutoResize.domRef;\n\n  function calcSVGData() {\n    return {\n      points: getPoints(),\n      svgScale: [width / svgWH[0], height / svgWH[1]]\n    };\n  }\n\n  var _useMemo = useMemo(calcSVGData, [width, height]),\n      svgScale = _useMemo.svgScale,\n      points = _useMemo.points;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gc-containers\",\n    style: style,\n    ref: domRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"\".concat(svgWH[0], \"px\"),\n    height: \"\".concat(svgWH[1], \"px\"),\n    style: {\n      transform: \"scale(\".concat(svgScale[0], \",\").concat(svgScale[1], \")\")\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, points.map(function (point, i) {\n    return /*#__PURE__*/React.createElement(\"rect\", {\n      key: i,\n      fill: defaultColor[0],\n      x: point[0] - halfPointSideLength,\n      y: point[1] - halfPointSideLength,\n      width: pointSideLength,\n      height: pointSideLength,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }, Math.random() > 0.6 && /*#__PURE__*/React.createElement(\"animate\", {\n      attributeName: \"fill\",\n      values: \"\".concat(defaultColor.join(\";\")),\n      dur: Math.random() + 1 + \"s\",\n      begin: Math.random() * 2,\n      repeatCount: \"indefinite\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }\n    }));\n  })));\n});\nDecoration.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  color: PropTypes.array\n};\nexport default Decoration;","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/materials/decoration/src/decoration3.js"],"names":["React","useMemo","forwardRef","PropTypes","useAutoResize","defaultColor","pointSideLength","svgWH","rowNum","rowPoints","halfPointSideLength","getPoints","w","h","horizontalGap","verticalGap","points","Array","fill","map","foo","i","j","reduce","all","item","Decoration","ref","style","width","height","domRef","calcSVGData","svgScale","transform","point","Math","random","join","propTypes","className","string","object","color","array"],"mappings":"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","sourcesContent":["import React, { useMemo, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAutoResize } from \"~common/hooks\";\n\nconst defaultColor = [\"#7acaec\", \"transparent\"];\nconst pointSideLength = 7;\nconst svgWH = [300, 35];\nconst rowNum = 2;\nconst rowPoints = 25;\nconst halfPointSideLength = pointSideLength / 2;\n\nfunction getPoints() {\n  const [w, h] = svgWH;\n\n  const horizontalGap = w / (rowPoints + 1);\n  const verticalGap = h / (rowNum + 1);\n\n  let points = new Array(rowNum)\n    .fill(0)\n    .map((foo, i) => new Array(rowPoints).fill(0).map((foo, j) => [horizontalGap * (j + 1), verticalGap * (i + 1)]));\n\n  return points.reduce((all, item) => [...all, ...item], []);\n}\n\nconst Decoration = forwardRef(({ style }, ref) => {\n  const { width, height, domRef } = useAutoResize(ref);\n\n  function calcSVGData() {\n    return {\n      points: getPoints(),\n      svgScale: [width / svgWH[0], height / svgWH[1]]\n    };\n  }\n\n  const { svgScale, points } = useMemo(calcSVGData, [width, height]);\n\n  return (\n    <div className=\"gc-containers\" style={style} ref={domRef}>\n      <svg\n        width={`${svgWH[0]}px`}\n        height={`${svgWH[1]}px`}\n        style={{ transform: `scale(${svgScale[0]},${svgScale[1]})` }}\n      >\n        {points.map((point, i) => (\n          <rect\n            key={i}\n            fill={defaultColor[0]}\n            x={point[0] - halfPointSideLength}\n            y={point[1] - halfPointSideLength}\n            width={pointSideLength}\n            height={pointSideLength}\n          >\n            {Math.random() > 0.6 && (\n              <animate\n                attributeName=\"fill\"\n                values={`${defaultColor.join(\";\")}`}\n                dur={Math.random() + 1 + \"s\"}\n                begin={Math.random() * 2}\n                repeatCount=\"indefinite\"\n              />\n            )}\n          </rect>\n        ))}\n      </svg>\n    </div>\n  );\n});\n\nDecoration.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  color: PropTypes.array\n};\n\nexport default Decoration;\n"]},"metadata":{},"sourceType":"module"}