{"ast":null,"code":"import \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/materials/form/select/drilldown.js\";\n\nimport React, { useRef } from \"react\";\nimport fetcher from \"~materials/hoc\";\nimport schemaJson from \"./schema-json\";\nimport { suid, cloneDeep } from \"~utils\";\n\nvar SelectComponent = function SelectComponent(props) {\n  var name = props.name,\n      value = props.value,\n      onChange = props.onChange;\n  var drillDownList = useRef(schemaJson).current; // TODO: 下钻参数处理 redux存储\n\n  var onDrillChange = function onDrillChange(val) {\n    var result;\n    var values = drillDownList.filter(function (o) {\n      return o.type === val;\n    }).map(function (v) {\n      return v[\"uniqueId\"] = suid(), v;\n    });\n    result = cloneDeep(values);\n    onChange(name, result);\n  };\n\n  return /*#__PURE__*/React.createElement(_Select, {\n    style: {\n      width: \"100%\"\n    },\n    allowClear: true,\n    placeholder: \"\\u8BF7\\u9009\\u62E9\\u4E0B\\u94BB\\u56FE\\u8868\",\n    value: value.length > 0 ? value[0].type : undefined,\n    onChange: onDrillChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }\n  }, drillDownList.map(function (item) {\n    return /*#__PURE__*/React.createElement(_Select.Option, {\n      key: item.type,\n      value: item.type,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 11\n      }\n    }, item.name);\n  }));\n};\n\nexport default fetcher(SelectComponent);","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/materials/form/select/drilldown.js"],"names":["React","useRef","fetcher","schemaJson","suid","cloneDeep","SelectComponent","props","name","value","onChange","drillDownList","current","onDrillChange","val","result","values","filter","o","type","map","v","width","length","undefined","item"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;AAEA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,SAASC,IAAT,EAAeC,SAAf,QAAgC,QAAhC;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AAAA,MACzBC,IADyB,GACCD,KADD,CACzBC,IADyB;AAAA,MACnBC,KADmB,GACCF,KADD,CACnBE,KADmB;AAAA,MACZC,QADY,GACCH,KADD,CACZG,QADY;AAEjC,MAAMC,aAAa,GAAGV,MAAM,CAACE,UAAD,CAAN,CAAmBS,OAAzC,CAFiC,CAIjC;;AACA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AAC7B,QAAIC,MAAJ;AACA,QAAMC,MAAM,GAAGL,aAAa,CAACM,MAAd,CAAqB,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,IAAF,KAAWL,GAAlB;AAAA,KAArB,EAA4CM,GAA5C,CAAgD,UAACC,CAAD;AAAA,aAASA,CAAC,CAAC,UAAD,CAAD,GAAgBjB,IAAI,EAArB,EAA0BiB,CAAlC;AAAA,KAAhD,CAAf;AACAN,IAAAA,MAAM,GAAGV,SAAS,CAACW,MAAD,CAAlB;AACAN,IAAAA,QAAQ,CAACF,IAAD,EAAOO,MAAP,CAAR;AACD,GALD;;AAOA,sBACE;AACE,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE;AAAT,KADT;AAEE,IAAA,UAAU,EAAE,IAFd;AAGE,IAAA,WAAW,EAAC,4CAHd;AAIE,IAAA,KAAK,EAAEb,KAAK,CAACc,MAAN,GAAe,CAAf,GAAmBd,KAAK,CAAC,CAAD,CAAL,CAASU,IAA5B,GAAmCK,SAJ5C;AAKE,IAAA,QAAQ,EAAEX,aALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOGF,aAAa,CAACS,GAAd,CAAkB,UAACK,IAAD,EAAU;AAC3B,wBACE,4BAAQ,MAAR;AAAe,MAAA,GAAG,EAAEA,IAAI,CAACN,IAAzB;AAA+B,MAAA,KAAK,EAAEM,IAAI,CAACN,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGM,IAAI,CAACjB,IADR,CADF;AAKD,GANA,CAPH,CADF;AAiBD,CA7BD;;AA+BA,eAAeN,OAAO,CAACI,eAAD,CAAtB","sourcesContent":["import React, { useRef } from \"react\";\nimport { Select } from \"antd\";\nimport fetcher from \"~materials/hoc\";\nimport schemaJson from \"./schema-json\";\nimport { suid, cloneDeep } from \"~utils\";\n\nconst SelectComponent = (props) => {\n  const { name, value, onChange } = props;\n  const drillDownList = useRef(schemaJson).current;\n\n  // TODO: 下钻参数处理 redux存储\n  const onDrillChange = (val) => {\n    let result;\n    const values = drillDownList.filter((o) => o.type === val).map((v) => ((v[\"uniqueId\"] = suid()), v));\n    result = cloneDeep(values);\n    onChange(name, result);\n  };\n\n  return (\n    <Select\n      style={{ width: \"100%\" }}\n      allowClear={true}\n      placeholder=\"请选择下钻图表\"\n      value={value.length > 0 ? value[0].type : undefined}\n      onChange={onDrillChange}\n    >\n      {drillDownList.map((item) => {\n        return (\n          <Select.Option key={item.type} value={item.type}>\n            {item.name}\n          </Select.Option>\n        );\n      })}\n    </Select>\n  );\n};\n\nexport default fetcher(SelectComponent);\n"]},"metadata":{},"sourceType":"module"}