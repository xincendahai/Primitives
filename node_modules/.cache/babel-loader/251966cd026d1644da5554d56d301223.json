{"ast":null,"code":"import _regeneratorRuntime from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/pages/fullscreen/index.jsx\";\n\n/**\n * core 编辑器渲染核心代码\n */\nimport React, { useMemo, useEffect, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { AxureScreen } from \"~renderer\";\nimport { Ctx, StoreCtx, useSet, useDocumentTitle } from \"~common/hooks\";\nimport { mergeFieldConfig, setLevelPath } from \"~renderer/utils\";\nimport AxureLayoutAside from \"./src/aside\";\nimport AxureLayoutHeader from \"./src/header\";\nimport AxureLayoutContent from \"./src/wrapper\";\nimport AxureLayoutField from \"./src/setting\";\nimport { dataVScreen, dataVApiList, dataVSqlList } from \"@/api\";\nimport { pathToParam, loadScript } from \"~utils\";\nloadScript(\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css\", \"css\");\n\nfunction DataProvider(props) {\n  var _this = this;\n\n  useDocumentTitle(\"DataV Pro - 数据大屏\"); // 设计器相关状态\n\n  var _useSet = useSet({\n    tabsKey: \"base\",\n    components: [],\n    page: {\n      name: \"\",\n      remark: \"\",\n      pageSize: \"large\",\n      zoom: \"cover\",\n      backgroundMode: \"define\",\n      backgroundColor: \"rgba(29, 33, 39, 1)\",\n      backgroundImage: \"\",\n      backgroundDefine: \"background-2.png\",\n      backgroundBlur: 0,\n      backgroundOpacity: 10,\n      width: 1920,\n      height: 1080\n    },\n    undo: [],\n    redo: []\n  }),\n      _useSet2 = _slicedToArray(_useSet, 2),\n      state = _useSet2[0],\n      setState = _useSet2[1]; // 其他无关状态\n\n\n  var _useSet3 = useSet({\n    layerCollapsed: false,\n    settingCollapsed: false,\n    visible: false,\n    rulerWidth: 0,\n    rulerHeight: 0,\n    width: 1366,\n    height: 768,\n    scale: 1,\n    startX: 0,\n    startY: 0,\n    lines: {\n      h: [],\n      v: []\n    },\n    isShowReferLine: true\n  }),\n      _useSet4 = _slicedToArray(_useSet3, 2),\n      view = _useSet4[0],\n      setView = _useSet4[1]; // 异步多接口请求\n\n\n  var storageData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var results;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return Promise.all([dataVApiList(), dataVSqlList()]).then(function (res) {\n                return res;\n              });\n\n            case 3:\n              results = _context.sent;\n              props.dispatch({\n                type: \"component/api\",\n                data: results[0].data\n              });\n              props.dispatch({\n                type: \"component/sql\",\n                data: results[1].data\n              });\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.warn(_context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function storageData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$dataVScreen, _yield$dataVScreen$da, page, components;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return dataVScreen();\n\n            case 3:\n              _yield$dataVScreen = _context2.sent;\n              _yield$dataVScreen$da = _yield$dataVScreen.data;\n              page = _yield$dataVScreen$da.page;\n              components = _yield$dataVScreen$da.components;\n              setState({\n                page: page,\n                components: components\n              });\n              props.dispatch({\n                type: \"component/activeKey\",\n                data: \"-\"\n              });\n              props.dispatch({\n                type: \"tab/component\",\n                data: []\n              });\n              props.dispatch({\n                type: \"component/drilldown\",\n                data: []\n              });\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.warn(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 13]]);\n    }));\n\n    return function fetchData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var rootValue = useMemo(function () {\n    return {\n      state: state,\n      setState: setState\n    };\n  }, [state]);\n  var viewValue = useMemo(function () {\n    return {\n      view: view,\n      setView: setView\n    };\n  }, [view]);\n  useEffect(function () {\n    props.dispatch({\n      type: \"component/mode\",\n      data: \"development\"\n    });\n    props.dispatch({\n      type: \"component/querys\",\n      data: pathToParam()\n    });\n    fetchData();\n    storageData();\n    onbeforeunload = \"return true\";\n  }, []);\n\n  var onValueChange = function onValueChange(uniqueId, value) {\n    var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    setLevelPath(state.components, null);\n    var results = mergeFieldConfig(state.components, {\n      parentId: uniqueId,\n      level: level\n    }, value);\n    setState({\n      components: results\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Ctx.Provider, {\n    value: rootValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StoreCtx.Provider, {\n    value: viewValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AxureLayoutHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"gc-design__bd\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DndProvider, {\n    backend: HTML5Backend,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AxureLayoutAside, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(AxureLayoutContent, Object.assign({}, state.page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }), state.components.length > 0 ? state.components.map(function (prop) {\n    return /*#__PURE__*/React.createElement(AxureScreen, {\n      value: prop,\n      key: prop.uniqueId,\n      onValueChange: onValueChange,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 23\n      }\n    });\n  }) : null), /*#__PURE__*/React.createElement(AxureLayoutField, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nexport default connect(function (state) {\n  return state.component;\n})(DataProvider);","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/pages/fullscreen/index.jsx"],"names":["React","useMemo","useEffect","Fragment","connect","DndProvider","HTML5Backend","AxureScreen","Ctx","StoreCtx","useSet","useDocumentTitle","mergeFieldConfig","setLevelPath","AxureLayoutAside","AxureLayoutHeader","AxureLayoutContent","AxureLayoutField","dataVScreen","dataVApiList","dataVSqlList","pathToParam","loadScript","DataProvider","props","tabsKey","components","page","name","remark","pageSize","zoom","backgroundMode","backgroundColor","backgroundImage","backgroundDefine","backgroundBlur","backgroundOpacity","width","height","undo","redo","state","setState","layerCollapsed","settingCollapsed","visible","rulerWidth","rulerHeight","scale","startX","startY","lines","h","v","isShowReferLine","view","setView","storageData","Promise","all","then","res","results","dispatch","type","data","console","warn","fetchData","rootValue","viewValue","onbeforeunload","onValueChange","uniqueId","value","level","parentId","length","map","prop","component"],"mappings":"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","sourcesContent":["/**\n * core 编辑器渲染核心代码\n */\nimport React, { useMemo, useEffect, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { AxureScreen } from \"~renderer\";\nimport { Ctx, StoreCtx, useSet, useDocumentTitle } from \"~common/hooks\";\nimport { mergeFieldConfig, setLevelPath } from \"~renderer/utils\";\nimport AxureLayoutAside from \"./src/aside\";\nimport AxureLayoutHeader from \"./src/header\";\nimport AxureLayoutContent from \"./src/wrapper\";\nimport AxureLayoutField from \"./src/setting\";\nimport { dataVScreen, dataVApiList, dataVSqlList } from \"@/api\";\nimport { pathToParam, loadScript } from \"~utils\";\n\nloadScript(\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css\", \"css\");\n\nfunction DataProvider(props) {\n  useDocumentTitle(\"DataV Pro - 数据大屏\");\n  // 设计器相关状态\n  const [state, setState] = useSet({\n    tabsKey: \"base\",\n    components: [],\n    page: {\n      name: \"\",\n      remark: \"\",\n      pageSize: \"large\",\n      zoom: \"cover\",\n      backgroundMode: \"define\",\n      backgroundColor: \"rgba(29, 33, 39, 1)\",\n      backgroundImage: \"\",\n      backgroundDefine: \"background-2.png\",\n      backgroundBlur: 0,\n      backgroundOpacity: 10,\n      width: 1920,\n      height: 1080\n    },\n    undo: [],\n    redo: []\n  });\n\n  // 其他无关状态\n  const [view, setView] = useSet({\n    layerCollapsed: false,\n    settingCollapsed: false,\n    visible: false,\n    rulerWidth: 0,\n    rulerHeight: 0,\n    width: 1366,\n    height: 768,\n    scale: 1,\n    startX: 0,\n    startY: 0,\n    lines: {\n      h: [],\n      v: []\n    },\n    isShowReferLine: true\n  });\n  // 异步多接口请求\n  const storageData = async () => {\n    try {\n      const results = await Promise.all([dataVApiList(), dataVSqlList()]).then((res) => {\n        return res;\n      });\n      props.dispatch({ type: \"component/api\", data: results[0].data });\n      props.dispatch({ type: \"component/sql\", data: results[1].data });\n    } catch (err) {\n      console.warn(err);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const {\n        data: { page, components }\n      } = await dataVScreen();\n      setState({ page: page, components: components });\n      props.dispatch({ type: \"component/activeKey\", data: \"-\" });\n      props.dispatch({ type: \"tab/component\", data: [] });\n      props.dispatch({ type: \"component/drilldown\", data: [] });\n    } catch (error) {\n      console.warn(error);\n    }\n  };\n\n  const rootValue = useMemo(() => ({ state, setState }), [state]);\n  const viewValue = useMemo(() => ({ view, setView }), [view]);\n\n  useEffect(() => {\n    props.dispatch({ type: \"component/mode\", data: \"development\" });\n    props.dispatch({ type: \"component/querys\", data: pathToParam() });\n\n    fetchData();\n    storageData();\n    onbeforeunload = \"return true\";\n  }, []);\n\n  const onValueChange = (uniqueId, value, level = 0) => {\n    setLevelPath(state.components, null);\n    let results = mergeFieldConfig(state.components, { parentId: uniqueId, level: level }, value);\n    setState({ components: results });\n  };\n\n  return (\n    <Ctx.Provider value={rootValue}>\n      <StoreCtx.Provider value={viewValue}>\n        <Fragment>\n          <AxureLayoutHeader />\n          <section className=\"gc-design__bd\">\n            <DndProvider backend={HTML5Backend}>\n              <AxureLayoutAside />\n              <AxureLayoutContent {...state.page}>\n                {state.components.length > 0\n                  ? state.components.map((prop) => (\n                      <AxureScreen value={prop} key={prop.uniqueId} onValueChange={onValueChange} />\n                    ))\n                  : null}\n              </AxureLayoutContent>\n              <AxureLayoutField />\n            </DndProvider>\n          </section>\n        </Fragment>\n      </StoreCtx.Provider>\n    </Ctx.Provider>\n  );\n}\n\nexport default connect((state) => state.component)(DataProvider);\n"]},"metadata":{},"sourceType":"module"}