{"ast":null,"code":"import \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _objectSpread from \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/popover/style\";\nimport _Popover from \"antd/es/popover\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/\\u56FE\\u5143/react-visual-data/src/materials/form/input/index.js\";\n\nimport React from \"react\";\nimport { PictureOutlined } from \"@ant-design/icons\";\nvar defaultImg = \"https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png\";\n\nvar previewContent = function previewContent(format, value) {\n  return format === \"image\" ? /*#__PURE__*/React.createElement(\"img\", {\n    src: value || defaultImg,\n    alt: \"\\u56FE\\u7247\\u5730\\u5740\\u9519\\u8BEF\",\n    className: \"fr-preview-image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 31\n    }\n  }) : null;\n};\n\nvar previewNode = function previewNode(format, value) {\n  if (format !== \"image\") {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(_Popover, {\n    content: previewContent(format, value),\n    className: \"fr-preview\",\n    placement: \"bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PictureOutlined, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar VInput = function VInput(p) {\n  var _p$options = p.options,\n      options = _p$options === void 0 ? {} : _p$options,\n      invalid = p.invalid,\n      _p$schema = p.schema,\n      schema = _p$schema === void 0 ? {} : _p$schema;\n  var style = invalid ? {\n    borderColor: \"#ff4d4f\",\n    boxShadow: \"0 0 0 2px rgba(255,77,79,.2)\"\n  } : {};\n  var _schema$format = schema.format,\n      format = _schema$format === void 0 ? \"text\" : _schema$format,\n      maxLength = schema.maxLength;\n  var type = format === \"image\" ? \"text\" : format;\n\n  var handleChange = function handleChange(e) {\n    return p.onChange(p.name, e.target.value);\n  };\n\n  var suffix = undefined;\n\n  try {\n    var _value = p.value || \"\";\n\n    suffix = options.suffix;\n\n    if (!suffix && maxLength) {\n      suffix = /*#__PURE__*/React.createElement(\"span\", {\n        style: _value.length > maxLength ? {\n          fontSize: 12,\n          color: \"#ff4d4f\"\n        } : {\n          fontSize: 12,\n          color: \"#999\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 9\n        }\n      }, _value.length + \" / \" + maxLength);\n    }\n  } catch (error) {}\n\n  var config = _objectSpread(_objectSpread({\n    placeholder: \"请输入\"\n  }, options), {}, {\n    maxLength: maxLength,\n    suffix: suffix\n  });\n\n  return /*#__PURE__*/React.createElement(_Input, Object.assign({\n    style: style\n  }, config, {\n    value: p.value,\n    type: type,\n    disabled: p.disabled || p.readonly,\n    addonAfter: options.addonAfter ? options.addonAfter : previewNode(format, p.value),\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default VInput;","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/图元/react-visual-data/src/materials/form/input/index.js"],"names":["React","PictureOutlined","defaultImg","previewContent","format","value","previewNode","VInput","p","options","invalid","schema","style","borderColor","boxShadow","maxLength","type","handleChange","e","onChange","name","target","suffix","undefined","_value","length","fontSize","color","error","config","placeholder","disabled","readonly","addonAfter"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,mBAAhC;AAGA,IAAMC,UAAU,GAAG,oEAAnB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,MAAD,EAASC,KAAT,EAAmB;AACxC,SAAOD,MAAM,KAAK,OAAX,gBAAqB;AAAK,IAAA,GAAG,EAAEC,KAAK,IAAIH,UAAnB;AAA+B,IAAA,GAAG,EAAC,sCAAnC;AAA4C,IAAA,SAAS,EAAC,kBAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAArB,GAAmG,IAA1G;AACD,CAFD;;AAIA,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAACF,MAAD,EAASC,KAAT,EAAmB;AACrC,MAAID,MAAM,KAAK,OAAf,EAAwB;AACtB,WAAO,IAAP;AACD;;AACD,sBACE;AAAS,IAAA,OAAO,EAAED,cAAc,CAACC,MAAD,EAASC,KAAT,CAAhC;AAAiD,IAAA,SAAS,EAAC,YAA3D;AAAwE,IAAA,SAAS,EAAC,QAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD,CATD;;AAWA,IAAME,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAAA,mBAC2BA,CAD3B,CACZC,OADY;AAAA,MACZA,OADY,2BACF,EADE;AAAA,MACEC,OADF,GAC2BF,CAD3B,CACEE,OADF;AAAA,kBAC2BF,CAD3B,CACWG,MADX;AAAA,MACWA,MADX,0BACoB,EADpB;AAEpB,MAAMC,KAAK,GAAGF,OAAO,GAAG;AAAEG,IAAAA,WAAW,EAAE,SAAf;AAA0BC,IAAAA,SAAS,EAAE;AAArC,GAAH,GAA2E,EAAhG;AAFoB,uBAGmBH,MAHnB,CAGZP,MAHY;AAAA,MAGZA,MAHY,+BAGH,MAHG;AAAA,MAGKW,SAHL,GAGmBJ,MAHnB,CAGKI,SAHL;AAIpB,MAAMC,IAAI,GAAGZ,MAAM,KAAK,OAAX,GAAqB,MAArB,GAA8BA,MAA3C;;AACA,MAAMa,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD;AAAA,WAAOV,CAAC,CAACW,QAAF,CAAWX,CAAC,CAACY,IAAb,EAAmBF,CAAC,CAACG,MAAF,CAAShB,KAA5B,CAAP;AAAA,GAArB;;AACA,MAAIiB,MAAM,GAAGC,SAAb;;AACA,MAAI;AACF,QAAMC,MAAM,GAAGhB,CAAC,CAACH,KAAF,IAAW,EAA1B;;AACAiB,IAAAA,MAAM,GAAGb,OAAO,CAACa,MAAjB;;AACA,QAAI,CAACA,MAAD,IAAWP,SAAf,EAA0B;AACxBO,MAAAA,MAAM,gBACJ;AAAM,QAAA,KAAK,EAAEE,MAAM,CAACC,MAAP,GAAgBV,SAAhB,GAA4B;AAAEW,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,KAAK,EAAE;AAAvB,SAA5B,GAAiE;AAAED,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,KAAK,EAAE;AAAvB,SAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGH,MAAM,CAACC,MAAP,GAAgB,KAAhB,GAAwBV,SAD3B,CADF;AAKD;AACF,GAVD,CAUE,OAAOa,KAAP,EAAc,CAAE;;AAClB,MAAMC,MAAM;AACVC,IAAAA,WAAW,EAAE;AADH,KAEPrB,OAFO;AAGVM,IAAAA,SAAS,EAATA,SAHU;AAIVO,IAAAA,MAAM,EAANA;AAJU,IAAZ;;AAMA,sBACE;AACE,IAAA,KAAK,EAAEV;AADT,KAEMiB,MAFN;AAGE,IAAA,KAAK,EAAErB,CAAC,CAACH,KAHX;AAIE,IAAA,IAAI,EAAEW,IAJR;AAKE,IAAA,QAAQ,EAAER,CAAC,CAACuB,QAAF,IAAcvB,CAAC,CAACwB,QAL5B;AAME,IAAA,UAAU,EAAEvB,OAAO,CAACwB,UAAR,GAAqBxB,OAAO,CAACwB,UAA7B,GAA0C3B,WAAW,CAACF,MAAD,EAASI,CAAC,CAACH,KAAX,CANnE;AAOE,IAAA,QAAQ,EAAEY,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAWD,CAnCD;;AAqCA,eAAeV,MAAf","sourcesContent":["import React from \"react\";\nimport { PictureOutlined } from \"@ant-design/icons\";\nimport { Input, Popover } from \"antd\";\n\nconst defaultImg = \"https://img.alicdn.com/tfs/TB14tSiKhTpK1RjSZFKXXa2wXXa-354-330.png\";\n\nconst previewContent = (format, value) => {\n  return format === \"image\" ? <img src={value || defaultImg} alt=\"图片地址错误\" className=\"fr-preview-image\" /> : null;\n};\n\nconst previewNode = (format, value) => {\n  if (format !== \"image\") {\n    return null;\n  }\n  return (\n    <Popover content={previewContent(format, value)} className=\"fr-preview\" placement=\"bottom\">\n      <PictureOutlined />\n    </Popover>\n  );\n};\n\nconst VInput = (p) => {\n  const { options = {}, invalid, schema = {} } = p;\n  const style = invalid ? { borderColor: \"#ff4d4f\", boxShadow: \"0 0 0 2px rgba(255,77,79,.2)\" } : {};\n  const { format = \"text\", maxLength } = schema;\n  const type = format === \"image\" ? \"text\" : format;\n  const handleChange = (e) => p.onChange(p.name, e.target.value);\n  let suffix = undefined;\n  try {\n    const _value = p.value || \"\";\n    suffix = options.suffix;\n    if (!suffix && maxLength) {\n      suffix = (\n        <span style={_value.length > maxLength ? { fontSize: 12, color: \"#ff4d4f\" } : { fontSize: 12, color: \"#999\" }}>\n          {_value.length + \" / \" + maxLength}\n        </span>\n      );\n    }\n  } catch (error) {}\n  const config = {\n    placeholder: \"请输入\",\n    ...options,\n    maxLength,\n    suffix\n  };\n  return (\n    <Input\n      style={style}\n      {...config}\n      value={p.value}\n      type={type}\n      disabled={p.disabled || p.readonly}\n      addonAfter={options.addonAfter ? options.addonAfter : previewNode(format, p.value)}\n      onChange={handleChange}\n    />\n  );\n};\n\nexport default VInput;\n"]},"metadata":{},"sourceType":"module"}