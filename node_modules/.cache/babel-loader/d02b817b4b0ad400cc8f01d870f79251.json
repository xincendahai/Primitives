{"ast":null,"code":"import _defineProperty from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/library/renderer/compiler/screen.jsx\";\n\nimport React, { useState, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport { connect } from \"react-redux\";\nimport generator from \"../generator\";\nimport { getField } from \"~materials\";\n\nvar GeneratorField = function GeneratorField(_ref) {\n  var _cx;\n\n  var value = _ref.value,\n      fields = _ref.fields,\n      tabDependencies = _ref.tabDependencies,\n      tabComponent = _ref.tabComponent;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      show = _useState2[0],\n      setShow = _useState2[1];\n\n  var _value$data = value.data,\n      width = _value$data.width,\n      height = _value$data.height,\n      background = _value$data.background,\n      left = _value$data.left,\n      top = _value$data.top,\n      isHidden = _value$data.isHidden,\n      rest = _objectWithoutProperties(_value$data, [\"width\", \"height\", \"background\", \"left\", \"top\", \"isHidden\"]);\n\n  var className = cx(\"animate__animated\", (_cx = {}, _defineProperty(_cx, \"animate__\".concat(rest.animateType), rest.animateType), _defineProperty(_cx, \"animate__\".concat(rest.animateSpeed), rest.animateSpeed), _defineProperty(_cx, \"animate__\".concat(rest.animateRepeat), rest.animateRepeat), _defineProperty(_cx, \"animate__delay-\".concat(rest.animateTime, \"s\"), rest.animateTime), _cx));\n  var overwriteStyle = {\n    position: \"absolute\",\n    left: left,\n    top: top,\n    padding: \"5px 12px\",\n    width: width,\n    height: height,\n    borderColor: \"transparent\",\n    borderWidth: 2,\n    borderStyle: \"solid\",\n    background: background,\n    boxShadow: rest.shadowColor ? \"\".concat(rest.shadowColor, \" \").concat(rest.shadowWidth || 0, \" \").concat(rest.shadowOffset || 0, \" \").concat(rest.shadowOffset || 0) : rest.shadowWidth\n  }; // TODO: tab控件控制器\n\n  useEffect(function () {\n    if (tabComponent.length === 0) return;\n\n    var _tabComponentComponents = fields.filter(function (item) {\n      return tabComponent.some(function (el) {\n        return el.to.includes(item.uniqueId);\n      });\n    });\n\n    var _components = _tabComponentComponents.find(function (item) {\n      return item.uniqueId === value.uniqueId;\n    });\n\n    if (typeof _components === undefined) {\n      return;\n    }\n\n    if (_components && tabDependencies.length && value.type !== \"tabs\") {\n      var ret = tabDependencies.some(function (el) {\n        return el.mapping.includes(value.uniqueId);\n      });\n      setShow(ret);\n    }\n  }, [tabDependencies]);\n  useEffect(function () {\n    setShow(!isHidden);\n  }, [isHidden]);\n\n  var getSubField = function getSubField(m) {\n    var prop = getField(value.type);\n    return generator(prop)(m);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: overwriteStyle,\n    className: className,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, show ? getSubField({\n    isDevelop: false,\n    type: value.type,\n    value: value.data,\n    uniqueId: value.uniqueId,\n    options: value.data.config\n  }) : null);\n};\n\nvar Fields = connect(function (state) {\n  return {\n    tabDependencies: state.tab.dependencies,\n    tabComponent: state.tab.component\n  };\n})(GeneratorField);\n\nvar GeneratorWidget = function GeneratorWidget(_ref2) {\n  var _ref2$widgets = _ref2.widgets,\n      widgets = _ref2$widgets === void 0 ? [] : _ref2$widgets;\n  if (widgets.length === 0) return null;\n  return widgets.map(function (prop) {\n    return /*#__PURE__*/React.createElement(Fields, {\n      fields: widgets,\n      value: prop,\n      key: prop.uniqueId,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 32\n      }\n    });\n  });\n};\n\nexport default GeneratorWidget;","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/library/renderer/compiler/screen.jsx"],"names":["React","useState","useEffect","cx","connect","generator","getField","GeneratorField","value","fields","tabDependencies","tabComponent","show","setShow","data","width","height","background","left","top","isHidden","rest","className","animateType","animateSpeed","animateRepeat","animateTime","overwriteStyle","position","padding","borderColor","borderWidth","borderStyle","boxShadow","shadowColor","shadowWidth","shadowOffset","length","_tabComponentComponents","filter","item","some","el","to","includes","uniqueId","_components","find","undefined","type","ret","mapping","getSubField","m","prop","isDevelop","options","config","Fields","state","tab","dependencies","component","GeneratorWidget","widgets","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport { connect } from \"react-redux\";\nimport generator from \"../generator\";\nimport { getField } from \"~materials\";\n\nconst GeneratorField = ({ value, fields, tabDependencies, tabComponent }) => {\n  const [show, setShow] = useState(true);\n  const { width, height, background, left, top, isHidden, ...rest } = value.data;\n  const className = cx(\"animate__animated\", {\n    [`animate__${rest.animateType}`]: rest.animateType,\n    [`animate__${rest.animateSpeed}`]: rest.animateSpeed,\n    [`animate__${rest.animateRepeat}`]: rest.animateRepeat,\n    [`animate__delay-${rest.animateTime}s`]: rest.animateTime\n  });\n\n  const overwriteStyle = {\n    position: \"absolute\",\n    left: left,\n    top: top,\n    padding: \"5px 12px\",\n    width: width,\n    height: height,\n    borderColor: \"transparent\",\n    borderWidth: 2,\n    borderStyle: \"solid\",\n    background,\n    boxShadow: rest.shadowColor\n      ? `${rest.shadowColor} ${rest.shadowWidth || 0} ${rest.shadowOffset || 0} ${rest.shadowOffset || 0}`\n      : rest.shadowWidth\n  };\n\n  // TODO: tab控件控制器\n  useEffect(() => {\n    if (tabComponent.length === 0) return;\n\n    let _tabComponentComponents = fields.filter((item) => tabComponent.some((el) => el.to.includes(item.uniqueId)));\n    let _components = _tabComponentComponents.find((item) => item.uniqueId === value.uniqueId);\n    if (typeof _components === undefined) {\n      return;\n    }\n\n    if (_components && tabDependencies.length && value.type !== \"tabs\") {\n      const ret = tabDependencies.some((el) => el.mapping.includes(value.uniqueId));\n      setShow(ret);\n    }\n  }, [tabDependencies]);\n\n  useEffect(() => {\n    setShow(!isHidden);\n  }, [isHidden]);\n\n  const getSubField = (m) => {\n    const prop = getField(value.type);\n    return generator(prop)(m);\n  };\n\n  return (\n    <div style={overwriteStyle} className={className}>\n      {show\n        ? getSubField({\n            isDevelop: false,\n            type: value.type,\n            value: value.data,\n            uniqueId: value.uniqueId,\n            options: value.data.config\n          })\n        : null}\n    </div>\n  );\n};\n\nconst Fields = connect((state) => ({\n  tabDependencies: state.tab.dependencies,\n  tabComponent: state.tab.component\n}))(GeneratorField);\n\nconst GeneratorWidget = ({ widgets = [] }) => {\n  if (widgets.length === 0) return null;\n\n  return widgets.map((prop) => <Fields fields={widgets} value={prop} key={prop.uniqueId} />);\n};\n\nexport default GeneratorWidget;\n"]},"metadata":{},"sourceType":"module"}