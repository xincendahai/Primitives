{"ast":null,"code":"import _slicedToArray from \"/Users/xiangmingxin/Wicrecend/Primitives/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/xiangmingxin/Wicrecend/Primitives/src/components/auto-container/index.jsx\";\n\nimport React, { useState, useLayoutEffect, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAutoResize } from \"~common/hooks\";\nimport \"./style.less\";\nimport { useEffect } from \"react\";\n/**\n * 根据屏幕尺寸缩放\n * @param zoom scaleX(等比例缩放高度铺满)、scaleY(等比例缩放宽度铺满)、cover(全屏铺满),\n * @param style 屏幕尺寸配置\n * par\n */\n\nvar FullScreenContainer = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      style = _ref.style,\n      _ref$zoom = _ref.zoom,\n      zoom = _ref$zoom === void 0 ? \"cover\" : _ref$zoom;\n\n  var _useAutoResize = useAutoResize(ref),\n      domRef = _useAutoResize.domRef;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      scale = _useState2[0],\n      setScale = _useState2[1];\n\n  var width = style.width,\n      height = style.height;\n  var _document$body = document.body,\n      clientHeight = _document$body.clientHeight,\n      clientWidth = _document$body.clientWidth;\n  useEffect(function () {\n    if (zoom === \"scaleY\") {\n      setScale(\"scale(\".concat(clientHeight / height, \")\"));\n    } else if (zoom === \"scaleX\") {\n      setScale(\"scale(\".concat(clientWidth / width, \")\"));\n    } else {\n      setScale(\"scale(\".concat(clientWidth / width, \", \").concat(clientHeight / height, \")\"));\n    }\n  });\n  useLayoutEffect(function () {\n    Object.assign(domRef.current.style, {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\"),\n      transform: scale\n    });\n\n    if (zoom === \"scaleY\") {\n      var clientLeft = +((clientWidth - width * clientHeight / height) / 2).toFixed(3);\n      domRef.current.style.left = \"\".concat(clientLeft, \"px\");\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"gc-fullscreen-container\",\n    className: className,\n    style: style,\n    ref: domRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, children);\n});\nFullScreenContainer.propTypes = {\n  children: PropTypes.node,\n  style: PropTypes.object\n};\nexport default FullScreenContainer;","map":{"version":3,"sources":["/Users/xiangmingxin/Wicrecend/Primitives/src/components/auto-container/index.jsx"],"names":["React","useState","useLayoutEffect","forwardRef","PropTypes","useAutoResize","useEffect","FullScreenContainer","ref","children","className","style","zoom","domRef","scale","setScale","width","height","document","body","clientHeight","clientWidth","Object","assign","current","transform","clientLeft","toFixed","left","propTypes","node","object"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,eAA1B,EAA2CC,UAA3C,QAA6D,OAA7D;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,aAAT,QAA8B,eAA9B;AAEA,OAAO,cAAP;AACA,SAASC,SAAT,QAA0B,OAA1B;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,mBAAmB,GAAGJ,UAAU,CAAC,gBAAiDK,GAAjD,EAAyD;AAAA,MAAtDC,QAAsD,QAAtDA,QAAsD;AAAA,MAA5CC,SAA4C,QAA5CA,SAA4C;AAAA,MAAjCC,KAAiC,QAAjCA,KAAiC;AAAA,uBAA1BC,IAA0B;AAAA,MAA1BA,IAA0B,0BAAnB,OAAmB;;AAAA,uBAC3EP,aAAa,CAACG,GAAD,CAD8D;AAAA,MACtFK,MADsF,kBACtFA,MADsF;;AAAA,kBAEpEZ,QAAQ,CAAC,EAAD,CAF4D;AAAA;AAAA,MAEvFa,KAFuF;AAAA,MAEhFC,QAFgF;;AAAA,MAGtFC,KAHsF,GAGpEL,KAHoE,CAGtFK,KAHsF;AAAA,MAG/EC,MAH+E,GAGpEN,KAHoE,CAG/EM,MAH+E;AAAA,uBAIxDC,QAAQ,CAACC,IAJ+C;AAAA,MAItFC,YAJsF,kBAItFA,YAJsF;AAAA,MAIxEC,WAJwE,kBAIxEA,WAJwE;AAM9Ff,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIM,IAAI,KAAK,QAAb,EAAuB;AACrBG,MAAAA,QAAQ,iBAAUK,YAAY,GAAGH,MAAzB,OAAR;AACD,KAFD,MAEO,IAAIL,IAAI,KAAK,QAAb,EAAuB;AAC5BG,MAAAA,QAAQ,iBAAUM,WAAW,GAAGL,KAAxB,OAAR;AACD,KAFM,MAEA;AACLD,MAAAA,QAAQ,iBAAUM,WAAW,GAAGL,KAAxB,eAAkCI,YAAY,GAAGH,MAAjD,OAAR;AACD;AACF,GARQ,CAAT;AAUAf,EAAAA,eAAe,CAAC,YAAM;AACpBoB,IAAAA,MAAM,CAACC,MAAP,CAAcV,MAAM,CAACW,OAAP,CAAeb,KAA7B,EAAoC;AAClCK,MAAAA,KAAK,YAAKA,KAAL,OAD6B;AAElCC,MAAAA,MAAM,YAAKA,MAAL,OAF4B;AAGlCQ,MAAAA,SAAS,EAAEX;AAHuB,KAApC;;AAKA,QAAIF,IAAI,KAAK,QAAb,EAAuB;AACrB,UAAMc,UAAU,GAAG,CAAC,CAAC,CAACL,WAAW,GAAIL,KAAK,GAAGI,YAAT,GAAyBH,MAAxC,IAAkD,CAAnD,EAAsDU,OAAtD,CAA8D,CAA9D,CAApB;AACAd,MAAAA,MAAM,CAACW,OAAP,CAAeb,KAAf,CAAqBiB,IAArB,aAA+BF,UAA/B;AACD;AACF,GAVc,CAAf;AAYA,sBACE;AAAK,IAAA,EAAE,EAAC,yBAAR;AAAkC,IAAA,SAAS,EAAEhB,SAA7C;AAAwD,IAAA,KAAK,EAAEC,KAA/D;AAAsE,IAAA,GAAG,EAAEE,MAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,QADH,CADF;AAKD,CAjCqC,CAAtC;AAmCAF,mBAAmB,CAACsB,SAApB,GAAgC;AAC9BpB,EAAAA,QAAQ,EAAEL,SAAS,CAAC0B,IADU;AAE9BnB,EAAAA,KAAK,EAAEP,SAAS,CAAC2B;AAFa,CAAhC;AAKA,eAAexB,mBAAf","sourcesContent":["import React, { useState, useLayoutEffect, forwardRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAutoResize } from \"~common/hooks\";\n\nimport \"./style.less\";\nimport { useEffect } from \"react\";\n\n/**\n * 根据屏幕尺寸缩放\n * @param zoom scaleX(等比例缩放高度铺满)、scaleY(等比例缩放宽度铺满)、cover(全屏铺满),\n * @param style 屏幕尺寸配置\n * par\n */\nconst FullScreenContainer = forwardRef(({ children, className, style, zoom = \"cover\" }, ref) => {\n  const { domRef } = useAutoResize(ref);\n  const [scale, setScale] = useState(\"\");\n  const { width, height } = style;\n  const { clientHeight, clientWidth } = document.body;\n\n  useEffect(() => {\n    if (zoom === \"scaleY\") {\n      setScale(`scale(${clientHeight / height})`);\n    } else if (zoom === \"scaleX\") {\n      setScale(`scale(${clientWidth / width})`);\n    } else {\n      setScale(`scale(${clientWidth / width}, ${clientHeight / height})`);\n    }\n  });\n\n  useLayoutEffect(() => {\n    Object.assign(domRef.current.style, {\n      width: `${width}px`,\n      height: `${height}px`,\n      transform: scale\n    });\n    if (zoom === \"scaleY\") {\n      const clientLeft = +((clientWidth - (width * clientHeight) / height) / 2).toFixed(3);\n      domRef.current.style.left = `${clientLeft}px`;\n    }\n  });\n\n  return (\n    <div id=\"gc-fullscreen-container\" className={className} style={style} ref={domRef}>\n      {children}\n    </div>\n  );\n});\n\nFullScreenContainer.propTypes = {\n  children: PropTypes.node,\n  style: PropTypes.object\n};\n\nexport default FullScreenContainer;\n"]},"metadata":{},"sourceType":"module"}